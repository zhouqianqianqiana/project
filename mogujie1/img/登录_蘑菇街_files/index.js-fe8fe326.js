!function(e,t,n){t.MGTOOL={},e.extend(MGTOOL,{byteLength:function(e){var t=e.match(/[^\x00-\x80]/g);return e.length+(t?t.length:0)},jsMbSubstr:function(e,t){if(!e||!t)return"";var n=0,o=0,r="",i=e.length;for(o=0;i>o;o++){if(n=e.charCodeAt(o)>255?n+=2:++n,n>2*t)return r;r+=e.charAt(o)}return e},formatMoney:function(e,t,n){if(t=MGTOOL.empty(e)?"2":t,MGTOOL.empty(n))return e.toFixed(t);var o=0>e?"-":"",r=parseInt(e=Math.abs(+e||0).toFixed(t),10)+"",i=(i=r.length)>3?i%3:0;return o+(i?r.substr(0,i)+n:"")+r.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+n)+(t?"."+Math.abs(e-r).toFixed(t).slice(2):"")}}),e.extend(MGTOOL,{emptyObj:function(e){for(var t in e)return!1;return!0},empty:function(e){return null==e||0===e.length},objToJson:function(e){return JSON.stringify(e)}}),e.extend(MGTOOL,{setCookie:function(e,t,n){n=n||{},null===t&&(t="",n.expires=-1);var o="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var r;"number"==typeof n.expires?(r=new Date,r.setTime(r.getTime()+864e5*n.expires)):r=n.expires,o="; expires="+r.toUTCString()}var i=n.path?"; path="+n.path:"",u=n.secure?"; secure":"",a="";n.domain?a="; domain="+n.domain:(a=document.domain.toString().split("."),a="; domain=."+a[1]+"."+a[2]),document.cookie=[e,"=",encodeURIComponent(t),o,i,a,u].join("")},getCookie:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==t?decodeURIComponent(t[2]):""},removeCookie:function(e){MGTOOL.setCookie(e,null,{expires:-1})},setCacheCookie:function(t,n,o,r){o=o||{},null===n&&(n="");var i="undefined"==typeof r?MGTOOL.getCookie("__mgjuuid"):r;e.ajax({url:"/collect/uedcookie",type:"POST",timeout:6e4,data:{cookiename:t,uuid:i,type:"set",value:n,lifetime:86400*o.expires},dataType:"json",success:function(e){""===e&&alert(MGLANG.msgTimeout)}})},getCacheCookie:function(t,n){var o="undefined"==typeof n?MGTOOL.getCookie("__mgjuuid"):n,r="";return e.ajax({url:"/collect/uedcookie",type:"POST",timeout:6e4,async:!1,data:{cookiename:t,uuid:o,type:"get"},dataType:"json",success:function(e){var t=e.status.code;e.status.msg;if(1001==t){var n=e.result.data.value;r=n}else alert(MGLANG.msgTimeout)}}),r}}),e.extend(MGTOOL,{getQueryString:function(e,t){t="undefined"!=typeof t?t:location.href;var n=new RegExp("(^|\\?|&)"+e+"=([^&]*)(\\s|&|$)","i");return n.test(t)?RegExp.$2.replace(/\+/g," "):""},getPicExtension:function(e){return/(.+)\.(.+)/.exec(e)?RegExp.$2:""},filterDomain:function(e){var t=/http:\/\/[^\/]+/;return e.replace(t,"")}}),e.extend(MGTOOL,{throttleM:{isLoading:!1,throttoleXhr:function(e,t){var n=this;if(!n.isLoading){t=t||500,n.isLoading=!0;var o=e();o.complete=function(){setTimeout(function(){n.isLoading=!1},t)}}}}}),e.extend(MGTOOL,{getMsgLength:function(e){var t=e.length;if(t>0){for(var n=41,o=140,r=24,i=e,u=e.match(/http[s]?:\/\/[a-zA-Z0-9-]+(\.[a-zA-Z0-9]+)+([-A-Z0-9a-z_\$\.\+\!\*\(\)\/\/,:;@&=\?\~\#\%]*)*/gi)||[],a=0,s=0,c=u.length;c>s;s++){var g=MGTOOL.byteLength(u[s]);/^(http:\/\/mogujie.cn)/.test(u[s])||(a+=/^(http:\/\/)+(mogujie.cn|mogujie.com)/.test(u[s])&&n>=g?g:o>=g?r:g-o+r,i=i.replace(u[s],""))}return Math.ceil((a+MGTOOL.byteLength(i))/2)}return 0},getAbsoluteLocation:function(n){if(1!==arguments.length||null===n)return null;var o=e(n),r=o.offset(),i=r.top,u=r.left,a=o.height(),s=e(t).height(),c=e(document).scrollTop(),g=i>=c&&c+s>=i,l=i+a+200>=c&&c+s>=i-400;return{absoluteTop:i,absoluteLeft:u,isInView:g,isLoad:l}},distance2Bottom:function(n){var o=e(document),r=e(t),i=o.scrollTop(),u=r.height(),a=o.height();return i+u+n>=a},isParent:function(e,t){for(;e!==n&&null!==e&&"BODY"!=e.tagName.toUpperCase();){if(e==t)return!0;e=e.parentNode}return!1},template:function(e,t){return doT.template(e)(t)},log:function(e){t.console!==n&&console.log(e)},dataFormat:function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in n)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return t}}),e.extend(MGTOOL,{trim:function(t){return e.trim(t)},getRequest:function(e,t){return this.getQueryString(e,t)}})}(jQuery,window);var MOGU=MOGU||{};!function(t){MOGU.Globe_Textarea_Auto_Height=function(e){var o=e.height(),i=function(){0>o&&(o=e.height()),(t.browser.mozilla||t.browser.safari)&&e.height(o);var i=e[0].scrollHeight,n=o>i?o:i;n=1.5*o>n?o:i,e.height(n)};e.bind("keyup",i).bind("input",i).bind("propertychange",i).bind("focus",i)},MOGU.Globe_Goods_URL_Support=function(t){var e=/item(.[\w]+)?.taobao.com\/(.?)[item.htm|item_num_id|item_detail|itemID|item_id|default_item_id]/i,o=/detail.tmall/i,i=/auction\d?.paipai.com/i,n=/buy.caomeipai.com\/goods/i,a=/www.360buy.com\/product/i,c=/product.dangdang.com\/Product.aspx\?product_id=/i,r=/book.360buy.com/i,s=/www.vancl.com\/StyleDetail/i,u=/www.vancl.com\/Product/i,l=/vt.vancl.com\/item/i,d=/item.vancl.com\/\d+/i,m=/item.vt.vancl.com\/\d+/i,w=/(mbaobao.com\/pshow)|(mbaobao.com\/item)/i,f=/item.buy.qq.com\/item/i,_=/[www|us].topshop.com\/webapp\/wcs\/stores\/servlet\/ProductDisplay/i,b=/quwan.com\/goods/i,h=/nala.com.cn\/product/i,p=/maymay.cn\/pitem/i,v=/asos.com/i,g=/www.100f1.com\/ProductInfo_/i,y=/www.gaojie.com\/product/i,G=/a.m.taobao.com\/i/i,O=/www.51yugou.com\//i,M=/www.1mall.com\//i,U=/www.yihaodian.com\//i,k=/www.xipin.me\//i,j=/www.nuandao.com\//i,x=/www.rosebeauty.com.cn\//i,L=/www.hmeili.com\//i,T=/www.yueji.com\//i,C=/www.yougou.com\//i,S=/cn.shopbop.com\//i,I=/item.jd.com\//i,P=/[www|shop].mogujie.com(.*)\/detail/i;return e.test(t)||o.test(t)||r.test(t)||a.test(t)||i.test(t)||n.test(t)||c.test(t)||s.test(t)||u.test(t)||l.test(t)||d.test(t)||m.test(t)||w.test(t)||_.test(t)||b.test(t)||h.test(t)||p.test(t)||v.test(t)||g.test(t)||y.test(t)||f.test(t)||G.test(t)||O.test(t)||U.test(t)||k.test(t)||j.test(t)||x.test(t)||L.test(t)||T.test(t)||C.test(t)||M.test(t)||S.test(t)||I.test(t)||P.test(t)},MOGU.Globe_Input_Text=function(e,o){o=o||e.val(),e.focus(function(){var e=t(this);t.trim(e.val())==o&&e.val(""),e.css("color","#000")}),e.blur(function(){var e=t(this);""==t.trim(e.val())&&(e.val(o),e.css("color","#ccc"))})},MOGU.Globe_Input_Text_Hide=function(e){e.focus(function(){var e=t(this);t.trim(e.val())==t.trim(e.attr("def-v"))&&e.val(""),e.css("color","#000")}),e.blur(function(){var e=t(this);""==t.trim(e.val())&&(e.val(e.attr("def-v")),e.css("color","#ccc"))})},MOGU.WB_Word_Count=function(e,o,i){var n=i?i:140;if(t("#"+e)[0]){var a=function(){var i=0;i=o?MGTOOL.getMsgLength(t("#"+o).val()):MGTOOL.getMsgLength(t("#"+e).find(".pub_txt").val());var a=n-i;0==i?t("#"+e).find(".word_count").html(n):i>n?(t("#"+e).find(".word_count_wrap").html('您已超过<em class="word_count"></em>个字').find(".word_count").html(Math.abs(a)),t("#"+e).find(".word_count_wrap").show(),t("#"+e).find(".word_count").addClass("out")):(t("#"+e).find(".word_count_wrap").html('还可以输入<em class="word_count"></em>个字').find(".word_count").html(a),t("#"+e).find(".word_count").removeClass("out"))};o?t("#"+o).bind("keyup",a).bind("input",a).bind("propertychange",a):t("#"+e).find(".pub_txt").bind("keyup",a).bind("input",a).bind("propertychange",a)}},MOGU.Globe_Range_Input=function(t){if(t[0].createTextRange){var e=t[0].createTextRange();e.moveEnd("character",t.val().length),e.moveStart("character",t.val().length),e.select()}else t[0].setSelectionRange(t.val().length,t.val().length),t.focus()},MOGU.Globe_Check_Login=function(){return""==MOGUPROFILE.userid?(MOGU.user_handsome_login_init(),MOGU.user_handsome_login(),!1):!0},MOGU.Globe_Short_Link_From=function(){t(".mg_slink").live("click",function(){var e=window.location.toString();if(!(e.indexOf("is_qzone=1")>=0)){var o=this,i=o.href,n=t(o).attr("s"),a=t(o).attr("c");""==a&&(a=MOGUPROFILE.userid);var c=i,r="";r=-1==i.indexOf("?")?"?c="+a+"&s="+n:"&c="+a+"&s="+n,c+=r,o.href=c,setTimeout(function(){o.href=i},500)}})},MOGU.Globe_Short_Link_From(),MOGU.Globe_Bind_Keybord_Submit=function(e,o,i){i=i||"need_focus","need_focus"==i&&(e.focus(function(){t("body").unbind("keydown"),t("body").bind("keydown",function(t){t.ctrlKey&&13==t.keyCode&&o.click()})}),e.blur(function(){t("body").unbind("keydown")})),"not_need_focus"==i&&t(document).bind("keydown",function(e){e.ctrlKey&&13==e.keyCode&&(o.click(),t("body").unbind("keydown"))})},MOGU.GLobe_GetObj_Length=function(t){var e,o=0;for(e in t)t.hasOwnProperty(e)&&o++;return o},MOGU.Empty_Message_Tip=function(t){var e=t?t:{},o=e.pub_obj,i=null,n=0;i=setInterval(function(){n++,6==n?(clearInterval(i),o.focus()):n%2==0?o.addClass("empty_tip"):o.removeClass("empty_tip")},120)},MOGU.Defult_Post_data=function(e){if(e instanceof jQuery||(e=t(e)),e.hasClass("disable"))return!1;e.addClass("disable");var o=e.data(),i=o.url||"";if(""!==i){var n=function(t){1001===t.status.code?window.location.reload():alert(t.status.msg)};jQuery.ajax({url:i,type:"POST",dataType:"json",data:o,complete:function(){e.removeClass("disable")},success:function(t){n(t)}})}},MOGU.Globe_Trace_Log=function(t){},t.fn.serializeObject=function(){var e={},o=this.serializeArray();return t.each(o,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},MOGU.SerializeFormObject=function(t){t.serializeObject()}}(jQuery),$(function(){$(document).off("click",".__trace__").on("click",".__trace__",function(t){var e=$(this).attr("data-trace");e&&MOGU.Globe_Trace_Log(e)})}),function(){for(var t,e=function(){},o=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],i=o.length,n=window.console=window.console||{};i--;)t=o[i],n[t]||(n[t]=e)}();window.Messenger=function(){function t(t,e){var i="";if(arguments.length<2?i="target error - target and name are both requied":"object"!=typeof t?i="target error - target itself must be window object":"string"!=typeof e&&(i="target error - target name must be string type"),i)throw new Error(i);this.target=t,this.name=e}function e(t,e){this.targets={},this.name=t,this.listenFunc=[],i=e||i,this.initListen()}var i="[PROJECT_NAME]",a="postMessage"in window;return a?t.prototype.send=function(t){this.target.postMessage(i+t,"*")}:t.prototype.send=function(t){var e=window.navigator[i+this.name];"function"==typeof e&&e(i+t,window)},e.prototype.addTarget=function(e,i){var a=new t(e,i);this.targets[i]=a},e.prototype.initListen=function(){var t=this,e=function(e){"object"==typeof e&&e.data&&(e=e.data),e=e.slice(i.length);for(var a=0;a<t.listenFunc.length;a++)t.listenFunc[a](e)};a?"addEventListener"in document?window.addEventListener("message",e,!1):"attachEvent"in document&&window.attachEvent("onmessage",e):window.navigator[i+this.name]=e},e.prototype.listen=function(t){this.listenFunc.push(t)},e.prototype.clear=function(){this.listenFunc=[]},e.prototype.send=function(t){var e,i=this.targets;for(e in i)i.hasOwnProperty(e)&&i[e].send(t)},e}();var MOGU=window.MOGU||{};MOGU.alert=MOGU.alert||function(t){window.alert(t)},MOGU.IM_Module=function(t,e,i,a,o,n){o=o||(o=MoGu.util);var r="http://www.mogujie.com",s=!(!t.ActiveXObject||t.XMLHttpRequest),d={style2:{width:"82",height:"26"},"default":{width:"85",height:"24"},widget1:{width:"40",height:"55"},widget2:{width:"40",height:"55"},widget3:{width:"18",height:"22"},widget4:{width:"48",height:"20"},yaya_style:{width:"64",height:"70"},pc:{width:"16",height:"17"},xd_style:{width:"75",height:"25"}},m=null,c=function(t){for(var e in d)if(t.hasClass(e))return e;return null},l=function(t,e){if(void 0===e){var i=o.getCookie(t);return""===i?void 0:n.parse(i)}o.setCookie(t,n.stringify(e),{expires:1,path:"/"})},u=function(t,e){if(void 0===e){var i=o.getCookie(t);return""===i?void 0:i}o.setCookie(t,e,{expires:1,path:"/"})},p=function(t){var e,a,o,n;a=['<div id="J_im_loadingdom" class="im-waiting">','<img class="lo_yaya" src="http://s17.mogucdn.com/p1/150927/upload_ieywmy3ege2tsm3fgmzdambqmeyde_92x92.png" width="92" height="92">','<p class="lo_word J_im_loading_dis"></p>',"</div>"].join(""),e=['<style id="J_im_loadingstyle">','.im-waiting{display:none;position:fixed;left:50%;top:50%;margin-left:-66px;margin-top:-66px;width:130px;height:130px;background:#fff;border:1px solid #dcdcdc;z-index:1000;border-radius:8px;box-shadow:0 0 12px rgba(0, 0, 0, .3);_position:absolute;_top:expression(document.compatMode && document.compatMode=="CSS1Compat"?documentElement.scrollTop+documentElement.clientHeight/2:document.body.scrollTop+document.body.clientHeight/2);}',".im-waiting .lo_yaya{display:block;margin:4px auto 0;}",".im-waiting .lo_word{color:#f46;text-align:center;font-size:12px;}","</style>"].join(""),o=i("#J_im_loadingstyle"),o.length<=0&&i("head").append(e),n=i("#J_im_loadingdom"),n.length<=0&&(n=i(a),i("body").append(n)),n.find(".J_im_loading_dis").html(t),n.show(300),setTimeout(function(){h()},3e4)},h=function(){i("#J_im_loadingdom").hide(300)},f=function(t,e,a,o,n){var d,m,c,l,h=/com\/detail\/(1[a-z0-9]+)/;d=r+"/mtalk/imv2/",m=['<style id="J_imframe_style">','.im-frame{position:fixed;visibility:hidden;width:569px;height:418px;right:120px;bottom:36px;z-index:1000;_position:absolute;_bottom:auto;_top:expression((document.compatMode && document.compatMode=="CSS1Compat"?documentElement.scrollTop+(documentElement.clientHeight-this.clientHeight):document.body.scrollTop+(document.body.clientHeight-this.clientHeight))-36);}',".im-closed{right:-600px!important;_right:120px;_display:none;}",".im-frame-proxy{position:fixed;width:476px;height:28px;right:148px;bottom:401px;z-index:1001;cursor:move;}",".im-proxy-closed{display:none;}",".ST_im-frame-proxy-move{background:#EBFAFF;opacity:.8;filter:alpha(opacity=80);}","html,body{_background-image:url(about:blank);_background-attachment:fixed;}","</style>"].join(""),c=['<iframe class="im-frame im-closed" id="J_imframe" src="" allowtransparency="true" scrolling="no" marginwidth="0" marginheight="0" width="569" height="418" frameborder="0"></iframe>'].join(""),l=['<div class="im-frame-proxy im-proxy-closed" id="J_imframe_proxy"></div>'].join("");var f=i("#J_imframe_style");f.length<=0&&i("head").append(m);var g=i("#J_imframe"),_=i("#J_imframe_proxy");if(g.length<=0&&(g=i(c),_=i(l),i("body").append(g),s||i("body").append(_),setTimeout(function(){g.css("visibility","visible")},1e3),p("正在连接...")),g.hasClass("im-closed")&&(g.removeClass("im-closed"),_.removeClass("im-proxy-closed")),t)g.attr("src",d+"#chat/"+t);else if(e){e.indexOf("#")<0&&(e+="#23");var y=decodeURIComponent(o).match(h),b="";y&&y[1]&&(b+="/g"+y[1]),g.attr("src",d+"#chat/b"+encodeURIComponent(e)+b)}else{var w=u("imcuid");w=w&&w.split("/"),w&&"hold"===w[0]&&w[1]?g.attr("src",d+"#chat/"+w[1]):g.attr("src",d+"#chat")}},g=function(e,a,o,s,d,c,u,p){if("service"===o){var h,g,_,y,b;t.webkitNotifications&&0!==t.webkitNotifications.checkPermission()&&t.webkitNotifications.requestPermission(function(){}),y="__mogutalk_boot",b={enable:"true"},e?(b.uid=e,l(y,b)):a&&(a.indexOf("#")<0&&(a+="#23"),b.bid=a,l(y,b)),g=l("__mogutalk_life"),_=+new Date,h=Math.abs(_-parseInt(g,10)),(void 0===g||h>4e3)&&t.open(r+"/mtalk","im","top=50,left=100,width=1000,height=640,location=yes,menubar=no,resizable=yes,scrollbars=yes,status=no,toolbar=no")}else if("cm"===o){var w={};c&&"true"===c&&(u&&(w.sign=u),p&&(w._did=p),w.imclient="1.0"),i.ajax({url:"/mtalk/im/calltobusiness",data:w,type:"POST",dataType:"json",success:function(){}})}else self!==top?m&&m.send(n.stringify({code:1001,data:{uid:e,bid:a,utype:o,refer:s,from:d}})):f(e,a,o,s,d)},_=function(){self!==top?(m=new Messenger("Frame","ImFrame"),m.addTarget(t.parent,"Parent")):(m=new Messenger("Parent","ImFrame"),m.listen(function(t){try{switch(t=n.parse(t),t.code){case 1001:var e=t.data;g(e.uid,e.bid,e.utype,e.refer,e.from);break;case 1002:i("#J_imframe").addClass("im-closed"),i("#J_imframe_proxy").addClass("im-proxy-closed");break;case 1003:i("#J_imframe").remove(),i("#J_imframe_proxy").remove(),h();break;case 1004:i("#J_imframe").removeClass("im-closed"),i("#J_imframe_proxy").removeClass("im-proxy-closed");break;case 1005:a.user_handsome_login_init(),a.user_handsome_login(!1,{callback:function(){location.reload()}});break;case 1006:var e=t.data;e.msg&&a.alert(e.msg);break;case 1007:var e=t.data;e&&e.msg?p(e.msg):h()}}catch(o){}}))},y=function(){var t=function(t){if(t){var e,a,o,n,s,m,c,l,u,p,h,f,g,_,y;if(e=i(t),a=e.attr("data-style")||"pc",c=e.attr("data-bid"),l=e.attr("data-uid"),u=e.attr("data-type"),g=e.attr("data-client"),p=e.attr("data-from"),h=e.html(),_=e.attr("data-sign"),y=e.attr("data-did"),o=d[a],void 0!==o&&(n=o.width,s=o.height,f=x?"√":"x",m=[r+"/mtalk/widget/enterbutton?","style=",a,"&width=",n,"&height=",s,"&cnt=",encodeURIComponent(h),"&islogin=",encodeURIComponent(f)],l?(m.push("&uid="),m.push(encodeURIComponent(l))):c&&(m.push("&bid="),m.push(encodeURIComponent(c))),u&&(m.push("&type="),m.push(encodeURIComponent(u))),l||c||u)){g&&"true"===g&&(m.push("&client="),m.push(encodeURIComponent(g)),m.push("&sign="),m.push(encodeURIComponent(_)),m.push("&_did="),m.push(encodeURIComponent(y))),m.push("&from="+(p||"")),m.push("&refer="+encodeURIComponent(location.href));var b=i('<iframe src="" width="'+n+'" height="'+s+'" frameborder="0" scrolling="no" marginheight="0" allowtransparency="true"></iframe>');e.html(b),b.attr("src",m.join(""))}}};i(".mogutalk_widget_btn").each(function(e){t(this)}),i(e).on("createim:widget",function(e,i){t(i)})},b=function(){i(".mogutalk_btn").each(function(){var t,e,a,o,n,r,s,d=null,m=!1;if(t=i(this),d=c(t),null!==d){if(n=t.attr("data-islogin"),(x||n&&"√"===n)&&(m=!0),a=t.attr("data-uid"),o=t.attr("data-bid"),r=t.attr("data-sign"),s=t.attr("data-did"),e={},data_block={},e.sign=r,e._did=s,data_block.sign=r,data_block._did=s,a)e.userId=a,data_block.uid=a;else{if(!o)return;o.indexOf("#")<0&&(o+="#23"),e.shopId=o.split("#")[0],e.type=o.split("#")[1],data_block.bid=o.split("#")[0]}i.ajax({url:"/mtalk/im/customeronline",data:e,dataType:"json",success:function(e){if(e&&1001===e.status.code){var i=1===e.result.isOnline;i||(t.addClass("mogutalk_btn_offline"),"default"!==d&&t.addClass(d+"_offline"))}}}),m&&i.ajax({url:"/mtalk/user/isblock",data:data_block,dataType:"json",success:function(e){void 0!==e&&1001===e.status.code&&e.result&&e.result.isBlock===!0&&t.addClass("isblock")}})}})},w=function(){i(e).on("click",".mogutalk_btn",function(e){e.preventDefault();var o,s,d,c,l,u,p,h,f,_,y;if(o=i(this),s=!1,u=o.attr("data-islogin"),(x||u&&"√"===u)&&(s=!0),!s)return a&&a.user_handsome_login_init?(a.user_handsome_login_init(),void a.user_handsome_login(!1,{callback:function(){location.reload()}})):void(top.location.href=r+"/login?refer="+(o.attr("data-refer")||encodeURIComponent(location.href)));if(d=o.attr("data-uid"),c=o.attr("data-bid"),l=o.attr("data-type"),h=o.attr("data-refer"),p=o.attr("data-from"),y=o.attr("data-client"),f=o.attr("data-sign"),_=o.attr("data-did"),o.hasClass("isblock")){var b="您不能和对方对话～";return void(t.parent==t.self?a.alert(b):m&&m.send(n.stringify({code:1006,data:{msg:b}})))}g(d,c,l,h,p,y,f,_)}),i(e).on("click",".duoduo_chat",function(t){t.preventDefault();var e=i(this).attr("data-uid");i.ajax({url:"/mtalk/im/calltotalk",data:{uid:e},type:"POST",dataType:"json",success:function(t){t&&t.status?1001===t.status.code?a.alert("已联系用户，请切换到多多查看！"):1002010===t.status.code?a.alert("请先登录多多！"):a.alert(t.status.msg):a.alert("网络错误，请稍后再试")}})})},v=function(){var t={startX:148,startY:401,mouseStartX:0,mouseStartY:0,originWidth:476,originHeight:28,width:569,height:418,offsetX:-28,offsetY:-365},a=i("#J_imframe"),o=0,n=function(){var e=i(".im-frame-proxy");e.length<=0||(e.animate({right:t.startX+t.offsetX+"px",bottom:t.startY+t.offsetY+"px"},100,function(){e.css({width:t.originWidth+"px",height:t.originHeight+"px",right:t.startX+"px",bottom:t.startY+"px"}).removeClass("ST_im-frame-proxy-move")}),a.length<=0&&(a=i("#J_imframe")),a.animate({opacity:1},100))},r=function(){clearTimeout(o),o=setTimeout(function(){n()},500)};i(e).on("mousedown",".im-frame-proxy",function(e){e.preventDefault();var o=i(this);t.startX=parseInt(o.css("right"),10),t.startY=parseInt(o.css("bottom"),10),t.mouseStartX=e.clientX,t.mouseStartY=e.clientY,o.css({width:t.width+"px",height:t.height+"px",right:t.startX+t.offsetX+"px",bottom:t.startY+t.offsetY+"px"}).addClass("ST_im-frame-proxy-move"),a.length<=0&&(a=i("#J_imframe")),a.animate({opacity:.9},100),r()}).on("mousemove",".ST_im-frame-proxy-move",function(e){e.preventDefault();var a=i(this);a.css({right:t.startX+(t.mouseStartX-e.clientX)+t.offsetX+"px",bottom:t.startY+(t.mouseStartY-e.clientY)+t.offsetY+"px"}),r()}).on("mouseup",".im-frame-proxy",function(e){e.preventDefault();var n=i(this);t.startX=t.startX+(t.mouseStartX-e.clientX),t.startY=t.startY+(t.mouseStartY-e.clientY),n.css({width:t.originWidth+"px",height:t.originHeight+"px",right:t.startX+"px",bottom:t.startY+"px"}).removeClass("ST_im-frame-proxy-move"),a.length<=0&&(a=i("#J_imframe")),a.css({right:t.startX+t.offsetX+"px",bottom:t.startY+t.offsetY+"px"}),a.animate({opacity:1},100),clearTimeout(o)})},x=!1;return{init:function(){i("body").on("userdatarecieve",function(t,e){e&&e.uid&&(x=!0),_(),y(),b(),w(),s||v()})}}}(window,document,jQuery,window.MOGU,window.MGTOOL,window.JSON),$(document).ready(function(){MOGU.IM_Module.init()});var swfobject=function(){function e(){if(!G){try{var e=M.getElementsByTagName("body")[0].appendChild(h("span"));e.parentNode.removeChild(e)}catch(t){return}G=!0;for(var n=R.length,a=0;n>a;a++)R[a]()}}function t(e){G?e():R[R.length]=e}function n(e){if(typeof x.addEventListener!=L)x.addEventListener("load",e,!1);else if(typeof M.addEventListener!=L)M.addEventListener("load",e,!1);else if(typeof x.attachEvent!=L)m(x,"onload",e);else if("function"==typeof x.onload){var t=x.onload;x.onload=function(){t(),e()}}else x.onload=e}function a(){P?i():r()}function i(){var e=M.getElementsByTagName("body")[0],t=h(k);t.setAttribute("type",O);var n=e.appendChild(t);if(n){var a=0;!function(){if(typeof n.GetVariable!=L){var i=n.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),X.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(10>a)return a++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,r()}()}else r()}function r(){var e=D.length;if(e>0)for(var t=0;e>t;t++){var n=D[t].id,a=D[t].callbackFn,i={success:!1,id:n};if(X.pv[0]>0){var r=y(n);if(r)if(!w(D[t].swfVersion)||X.wk&&X.wk<312)if(D[t].expressInstall&&l()){var f={};f.data=D[t].expressInstall,f.width=r.getAttribute("width")||"0",f.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(f.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(f.align=r.getAttribute("align"));for(var d={},u=r.getElementsByTagName("param"),p=u.length,v=0;p>v;v++)"movie"!=u[v].getAttribute("name").toLowerCase()&&(d[u[v].getAttribute("name")]=u[v].getAttribute("value"));s(f,d,n,a)}else c(r),a&&a(i);else b(n,!0),a&&(i.success=!0,i.ref=o(n),a(i))}else if(b(n,!0),a){var h=o(n);h&&typeof h.SetVariable!=L&&(i.success=!0,i.ref=h),a(i)}}}function o(e){var t=null,n=y(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=L)t=n;else{var a=n.getElementsByTagName(k)[0];a&&(t=a)}return t}function l(){return!J&&w("6.0.65")&&(X.win||X.mac)&&!(X.wk&&X.wk<312)}function s(e,t,n,a){J=!0,A=a||null,N={success:!1,id:n};var i=y(n);if(i){"OBJECT"==i.nodeName?(E=f(i),S=null):(E=i,S=n),e.id=F,(typeof e.width==L||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==L||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),M.title=M.title.slice(0,47)+" - Flash Player Installation";var r=X.ie&&X.win?"ActiveX":"PlugIn",o="MMredirectURL="+x.location.toString().replace(/&/g,"%26")+"&MMplayerType="+r+"&MMdoctitle="+M.title;if(typeof t.flashvars!=L?t.flashvars+="&"+o:t.flashvars=o,X.ie&&X.win&&4!=i.readyState){var l=h("div");n+="SWFObjectNew",l.setAttribute("id",n),i.parentNode.insertBefore(l,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}d(e,t,n)}}function c(e){if(X.ie&&X.win&&4!=e.readyState){var t=h("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(f(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(f(e),e)}function f(e){var t=h("div");if(X.win&&X.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(k)[0];if(n){var a=n.childNodes;if(a)for(var i=a.length,r=0;i>r;r++)1==a[r].nodeType&&"PARAM"==a[r].nodeName||8==a[r].nodeType||t.appendChild(a[r].cloneNode(!0))}}return t}function d(e,t,n){var a,i=y(n);if(X.wk&&X.wk<312)return a;if(i)if(typeof e.id==L&&(e.id=n),X.ie&&X.win){var r="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?r+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(r+=" "+o+'="'+e[o]+'"'));var l="";for(var s in t)t[s]!=Object.prototype[s]&&(l+='<param name="'+s+'" value="'+t[s]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+l+"</object>",W[W.length]=e.id,a=y(e.id)}else{var c=h(k);c.setAttribute("type",O);for(var f in e)e[f]!=Object.prototype[f]&&("styleclass"==f.toLowerCase()?c.setAttribute("class",e[f]):"classid"!=f.toLowerCase()&&c.setAttribute(f,e[f]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&u(c,d,t[d]);i.parentNode.replaceChild(c,i),a=c}return a}function u(e,t,n){var a=h("param");a.setAttribute("name",t),a.setAttribute("value",n),e.appendChild(a)}function p(e){var t=y(e);t&&"OBJECT"==t.nodeName&&(X.ie&&X.win?(t.style.display="none",function(){4==t.readyState?v(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function v(e){var t=y(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function y(e){var t=null;try{t=M.getElementById(e)}catch(n){}return t}function h(e){return M.createElement(e)}function m(e,t,n){e.attachEvent(t,n),H[H.length]=[e,t,n]}function w(e){var t=X.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function g(e,t,n,a){if(!X.ie||!X.mac){var i=M.getElementsByTagName("head")[0];if(i){var r=n&&"string"==typeof n?n:"screen";if(a&&(T=null,I=null),!T||I!=r){var o=h("style");o.setAttribute("type","text/css"),o.setAttribute("media",r),T=i.appendChild(o),X.ie&&X.win&&typeof M.styleSheets!=L&&M.styleSheets.length>0&&(T=M.styleSheets[M.styleSheets.length-1]),I=r}X.ie&&X.win?T&&typeof T.addRule==k&&T.addRule(e,t):T&&typeof M.createTextNode!=L&&T.appendChild(M.createTextNode(e+" {"+t+"}"))}}}function b(e,t){if(U){var n=t?"visible":"hidden";G&&y(e)?y(e).style.visibility=n:g("#"+e,"visibility:"+n)}}function C(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=L?encodeURIComponent(e):e}var E,S,A,N,T,I,L="undefined",k="object",j="Shockwave Flash",B="ShockwaveFlash.ShockwaveFlash",O="application/x-shockwave-flash",F="SWFObjectExprInst",$="onreadystatechange",x=window,M=document,V=navigator,P=!1,R=[a],D=[],W=[],H=[],G=!1,J=!1,U=!0,X=function(){var e=typeof M.getElementById!=L&&typeof M.getElementsByTagName!=L&&typeof M.createElement!=L,t=V.userAgent.toLowerCase(),n=V.platform.toLowerCase(),a=n?/win/.test(n):/win/.test(t),i=n?/mac/.test(n):/mac/.test(t),r=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o=!1,l=[0,0,0],s=null;if(typeof V.plugins!=L&&typeof V.plugins[j]==k)s=V.plugins[j].description,!s||typeof V.mimeTypes!=L&&V.mimeTypes[O]&&!V.mimeTypes[O].enabledPlugin||(P=!0,o=!1,s=s.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),l[0]=parseInt(s.replace(/^(.*)\..*$/,"$1"),10),l[1]=parseInt(s.replace(/^.*\.(.*)\s.*$/,"$1"),10),l[2]=/[a-zA-Z]/.test(s)?parseInt(s.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof x.ActiveXObject!=L)try{var c=new ActiveXObject(B);c&&(s=c.GetVariable("$version"),s&&(o=!0,s=s.split(" ")[1].split(","),l=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)]))}catch(f){}return{w3:e,pv:l,wk:r,ie:o,win:a,mac:i}}();(function(){X.w3&&((typeof M.readyState!=L&&"complete"==M.readyState||typeof M.readyState==L&&(M.getElementsByTagName("body")[0]||M.body))&&e(),G||(typeof M.addEventListener!=L&&M.addEventListener("DOMContentLoaded",e,!1),X.ie&&X.win&&(M.attachEvent($,function(){"complete"==M.readyState&&(M.detachEvent($,arguments.callee),e())}),x==top&&!function(){if(!G){try{M.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),X.wk&&!function(){return G?void 0:/loaded|complete/.test(M.readyState)?void e():void setTimeout(arguments.callee,0)}(),n(e)))})(),function(){X.ie&&X.win&&window.attachEvent("onunload",function(){for(var e=H.length,t=0;e>t;t++)H[t][0].detachEvent(H[t][1],H[t][2]);for(var n=W.length,a=0;n>a;a++)p(W[a]);for(var i in X)X[i]=null;X=null;for(var r in swfobject)swfobject[r]=null;swfobject=null})}();return{registerObject:function(e,t,n,a){if(X.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=a,D[D.length]=i,b(e,!1)}else a&&a({success:!1,id:e})},getObjectById:function(e){return X.w3?o(e):void 0},embedSWF:function(e,n,a,i,r,o,c,f,u,p){var v={success:!1,id:n};X.w3&&!(X.wk&&X.wk<312)&&e&&n&&a&&i&&r?(b(n,!1),t(function(){a+="",i+="";var t={};if(u&&typeof u===k)for(var y in u)t[y]=u[y];t.data=e,t.width=a,t.height=i;var h={};if(f&&typeof f===k)for(var m in f)h[m]=f[m];if(c&&typeof c===k)for(var g in c)typeof h.flashvars!=L?h.flashvars+="&"+g+"="+c[g]:h.flashvars=g+"="+c[g];if(w(r)){var C=d(t,h,n);t.id==n&&b(n,!0),v.success=!0,v.ref=C}else{if(o&&l())return t.data=o,void s(t,h,n,p);b(n,!0)}p&&p(v)})):p&&p(v)},switchOffAutoHideShow:function(){U=!1},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:w,createSWF:function(e,t,n){return X.w3?d(e,t,n):void 0},showExpressInstall:function(e,t,n,a){X.w3&&l()&&s(e,t,n,a)},removeSWF:function(e){X.w3&&p(e)},createCSS:function(e,t,n,a){X.w3&&g(e,t,n,a)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=M.location.search||M.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return C(t);for(var n=t.split("&"),a=0;a<n.length;a++)if(n[a].substring(0,n[a].indexOf("="))==e)return C(n[a].substring(n[a].indexOf("=")+1))}return""},expressInstallCallback:function(){if(J){var e=y(F);e&&E&&(e.parentNode.replaceChild(E,e),S&&(b(S,!0),X.ie&&X.win&&(E.style.display="block")),A&&A(N)),J=!1}}}}();var imio=function(t,o,e,n,i){function a(t){this.e_pre="imio:",this.data={connectionStatus:!1,connectionType:null,service:""},this.config=e.extend({connectMethod:["serviceHost","ajaxServiceHost","ajaxServiceBakHost"],socketSwf:"http://s8.mogucdn.com/new1/v1/bmisc/30694b9ecac3d336876dc21db9a04dd0/161101909382.swf",serviceHost:"122.225.67.108:101.68.210.108:8808",ajaxServiceHost:"http://122.225.67.108:80",ajaxServiceBakHost:"http://101.68.210.108:80",timestamp:+new Date},t)}var c=function(t){if("object"!=typeof t)return null;var o,e=parseInt(100*Math.random(),10)+100,n="",i=0;for(var a in t)n+=t[a];o=n.split("");for(var c=0,s=o.length;s>c;c++)i+=o[c].charCodeAt();return t._n=e,t._p=i%e,t};return a.prototype.emit=function(t){this.uinfo=e.extend({uid:"",uuid:"",token:""},t),this.uinfo.uid&&this.connectSvr()},a.prototype.on=function(t,n){e(o).on(this.e_pre+t,function(t,o){n&&n(o)})},a.prototype.trigger=function(t,n){e(o).trigger(this.e_pre+t,[n])},a.prototype.connectSvr=function(){var t=this,o=t.config.connectMethod,e={serviceHost:"flash",ajaxServiceHost:"ajax",ajaxServiceBakHost:"ajax"},i=n.getFlashPlayerVersion();if(void 0===i||0===i.major)for(var a=0,c=o.length;c>a;a++)if("serviceHost"===o[a]){o.splice(a,1);break}var s=0;!function r(n){var i=t.data.connectionStatus;if(!i&&n)t.data.service=t.config[n],t.data.connectionType=e[n],t.start(e[n]);else if(!i&&void 0===n)return t.trigger("loading:status","timeout"),void clearTimeout(s);s=setTimeout(function(){var e=o.shift();t.data.connectionStatus||(r(e),e&&t.trigger("loading:status","reconnect"))},1e4)}(o.shift())},a.prototype.httpConnect=function(){e("#imioflashobj").remove();var t=this,o={uid:t.uinfo.uid,token:t.uinfo.token,status:1};o=c(o),e.ajax({url:t.data.service+"/push/login",data:o,dataType:"jsonp",timeout:9e3,success:function(o){if(o&&1001===o.status.code){if(t.data.connectionStatus)return;t.uinfo.uuid=o.result.uuid,t.call(encodeURIComponent('{"code":1001,"type":"_imioLoginCB"}')),t.startPoll(),t.autoToken(),t.send("getUnReadCounter")}}})},a.prototype.flashConnect=function(){var t=this,o=e("#imioflashobj");o.length<=0&&(o=e('<span id="imioflashobj"></span>'),e("body").append(o));var i=t.config,a=e.extend({serverList:i.serviceHost},t.uinfo),c={wmode:"transplate",allowscriptaccess:"always"},s={id:"imioflashobj",name:"imioflashobj"};window._imioSocket={call:function(o){t.connectionStatus||t.autoToken(),t.call(o)}},n.embedSWF(t.config.socketSwf,"imioflashobj","0","0","9.0.0","",a,c,s)},a.prototype.start=function(t){"flash"===t?this.flashConnect():"ajax"===t&&this.httpConnect()},a.prototype.startPoll=function(){var t=this,o=(t.config,t.uinfo);!function n(){e.ajax({url:t.data.service+"/push/poll",data:{uid:o.uid,uuid:o.uuid,token:o.token,type:"poll"},type:"GET",dataType:"jsonp",timeout:5e4,success:function(o){return null===o||(t.call(encodeURIComponent(i.stringify(o))),"errorCode"!==o.type||4011!==o.data&&4002!==o.data&&4005!==o.data&&4444!==o.data)?void n():void t.showNotice(o.data)},error:function(){t.showNotice(6002)}})}()},a.prototype.autoToken=function(){var t=this;t.startAutoToken||(!function o(){setTimeout(function(){e.ajax({url:"http://www.mogujie.com/mtalk/iauth",type:"GET",data:null,dataType:"jsonp",success:function(e){e&&e.status&&1001===e.status.code&&(t.uinfo.token=e.result.token,o())}})},36e5)}(),t.startAutoToken=!0)},a.prototype.showNotice=function(t){t+="";var o={4004:"消息发送超时",6000:"网络连接出错",6001:"您不能和对方对话",10001:"抱歉！没有客服在线",4002:"参数错误，请重新登录",4003:"您已断开连接，请重新登录",4005:"用户校验失败，请重新登陆",4011:"您已在其他地方上线，请重新打开",4444:"您已经离线，请重新打开",6002:"连接失败，请重新打开"};this.trigger("notice:show",{code:+t,msg:void 0===o[t]?"未知错误["+t+"]":o[t]})},a.prototype.call=function(t){t=i.parse(decodeURIComponent(t));var o=this;if(t&&1001===t.code)switch(t.type){case"_imioLoginCB":o.data.connectionStatus=!0;break;case"_imioSocket":o.trigger("data:update",t.data)}},a.prototype.send=function(t,o){o=encodeURIComponent(i.stringify(o));var n=this;if("flash"===n.data.connectionType){var a=e("#imioflashobj")[0];if(!a)return;return void function c(t,o){n.data.connectionStatus?a[t](o):"flash"===n.data.connectionType&&setTimeout(function(){c(t,o)},100)}(t,o)}return"ajax"===n.data.connectionType?void function(t,o){var a={uid:n.uinfo.uid,uuid:n.uinfo.uuid,token:n.uinfo.token,type:t};void 0!==o&&(a.data=decodeURIComponent(o)),e.ajax({url:n.data.service+"/push/request",data:a,type:"GET",dataType:"jsonp",success:function(t){t&&t.data?n.call(encodeURIComponent(i.stringify(t))):t&&4003===t.code&&n.showNotice(4003)},error:function(){n.showNotice(6002)}})}(t,o):void 0},{connect:function(t){return new a(t)}}}(window,document,jQuery,swfobject,JSON);!function(e,t,i,o){var a="undefined"!=typeof e.MOGU?e.MOGU:{},n="undefined"!=typeof e.MGTOOL?e.MGTOOL:{},d=i("head").find("link"),s=d.eq(d.length-1).attr("href"),u=+new Date;"string"==typeof s&&s.indexOf("$")>0&&(!window.ActiveXObject||window.XMLHttpRequest)&&(u=s.split("$")[1].split(".")[0]),function(){var e;i.ajax({url:"/mtalk/load",data:null,dataType:"json",success:function(t){if(t&&t.status&&1001===t.status.code){var d=t.result;e=o.connect({serviceHost:d.serviceHost,ajaxServiceHost:d.ajaxServiceHost,ajaxServiceBakHost:d.ajaxServiceBakHost,timestamp:u}),e.on("data:update",function(e){a.cinfo=e,i("body").trigger("cinfodatarecieve",[e])}),e.emit({uid:d.userId,token:d.token,uuid:n.getCookie("__mgjuuid"),mgj:n.getCookie("__ud_"),fromsite:n.getCookie("from_site")})}}})}()}(window,document,jQuery,window.imio);!function(t){MOGU.imgCodeCheck=function(){var a=!1,i=t(".img_code_spin");if(0==i.length)return a=!0;for(var c=0;c<i.length;c++){var e=t(i[c]);if(0!=e.val()){a=!0;break}}return a},MOGU.imgCaptchaInit=function(){var a=t(".imgcheck_image_div"),i=t("#imgcheck_code_change"),c=function(t,a){var i=-75*((a+1)%4),c=t[0].style.backgroundPosition.split(" ");t[0].style.backgroundPosition=c[0]+" "+i+"px"};a.click(function(){var a=t(this).attr("f"),i=t("#img_code_spin_"+a),e=parseInt(i.val());c(t(this),e),i.val(e+1)}),i.click(function(){MOGU.imgCaptchaRecaptcha()})},MOGU.imgCaptchaRecaptcha=function(a){var i=function(a){for(var i=t(".imgcheck_image_div"),c=i.length,e=0;c>e;e++){var n=i[e],o=n.getAttribute("f"),r=t("#img_code_spin_"+o);r.val(0);var u=t(n);u.css("background-image","url(/captchaimg/"+a+")"),u.css({"background-position":-75*e+"px 0"})}};void 0===a?t.ajax({url:"/reimgcaptcha",type:"POST",timeout:6e4,data:{},dataType:"json",cache:!1,success:function(t){var a=t.status.code;t.status.msg;if(1001==a){var c=t.result.data.captchaId;i(c)}},error:function(t,a,i){"timeout"==a&&alert(MGLANG.msgTimeout)}}):setTimeout(function(){i(a)},1)},MOGU.imgCaptchaInit()}(jQuery);!function(t,e,n){e.MOGU=e.MOGU||{};var i={init:function(){t(document).off(".mga").on("click.mga",'[data-mga="event"]',function(e){return function(n){var i,a,o,r,c;return i=t(n.currentTarget),o=i.data("category")||i[0].tagName,a=i.data("action")||n.type,r=i.data("label")||i[0].className,c=i.data("value")||i.html(),e.triggerEvent(o,a,r,c)}}(this))},triggerEvent:function(t,e,n,i){var a=this;clearTimeout(o);var o=setTimeout(function(){a.event(t,e,n,i)},500)},event:function(e,n,i,a){var o={action:n,page:e,pos:i};t.ajax({type:"POST",url:"http://www.mogujie.com/itemsactionlog",data:o,success:function(t,e,n){},error:function(t,e,n){}})},isInScope:function(n){return n.length>0&&t(e).scrollTop()<n.offset().top+n.outerHeight()&&t(e).scrollTop()+t(e).height()>n.offset().top},pageview:function(t,e,n){var i=this;clearTimeout(a);var a=setTimeout(function(){i.isInScope(n)&&i.event(t,"view",e,null)},500)}};i.init(),MOGU.mga=i,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("mga",[],function(){return i})}(jQuery,window);!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("pc/common/nav/index",[],e):"object"==typeof exports?exports["pc/common/nav/index"]=e():t["pc/common/nav/index"]=e()}(this,function(){return function(t){function e(o){if(a[o])return a[o].exports;var i=a[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){"use strict";a(1),a(2),a(3),a(5),a(6)},function(t,e,a){var o,i;o=[],i=function(){function t(t,e,a){function o(){var e=i.shift();e&&t.apply(e.context,e.arguments),0===i.length&&(clearInterval(n),n=null)}var i=[],n=null;return function(){i.push({context:a||this,arguments:[].slice.call(arguments)}),n||(o(),n=setInterval(o,e))}}function e(t,e,a){return parseInt(t+"",0|e).toString(0|a)}function a(){var t=$(".J_sitenav .wrap"),e=(r.find(".mgj-my-cart"),r.find(".mgj-my-avatar"),['<a href="http://www.mogujie.com" rel="nofollow" class="home fl">蘑菇街首页</a>','<ul class="header_top">',"{{? it.name}}",'<li class="s1 has_icon user_meta">','<a rel="nofollow" href="javascript:;">',"{{=it.name}}","</a>",'<a rel="nofollow" href="http://www.mogujie.com/member" target="_blank">',"{{?it.userLevel}}",'<span class="level level',"{{=it.userLevel - 1}}",'">&nbsp;</span>',"{{?}}","</a>",'<i class="icon_delta"></i>','<ol class="ext_mode" id="menu_personal">','<li class="s2">','<a target="_blank" rel="nofollow" href="http://www.mogujie.com/settings/personal">个人设置</a>',"</li>",'<li class="s2">','<a target="_blank" rel="nofollow" href="http://www.mogujie.com/settings/bind">账号绑定</a>',"</li>",'<li class="s2">','<a rel="nofollow" href="//www.mogujie.com/logout">退出</a>',"</li>","</ol>","</li>",'<li class="s1 has_line message_center">','<a rel="nofollow" href="javascript:;" class="ext_module mogutalk_btn J_msg open_msg micon" data-from="shopwidget_message" data-trace="global,shopwidget_message,click">','消息<span class="num m_num"></span>',"</a>","</li>",'<li class="s1 has_icon has_line user_fav">','<a rel="nofollow" href="javascript:;">我的收藏</a>','<i class="icon_delta"></i>','<ul class="ext_mode">','<li class="s2">','<a target="_blank" rel="nofollow" href="http://www.mogujie.com/active/favs">收藏的商品</a>',"</li>",'<li class="s2">','<a target="_blank" rel="nofollow" href="http://www.mogujie.com/active/shopfavs">收藏的小店</a>',"</li>",'<li class="s2">','<a target="_blank" rel="nofollow" href="http://www.mogujie.com/active/browserlog">浏览足迹</a>',"</li>","</ul>","</li>","{{??}}",'<li class="s1 show-nologin">','<a rel="nofollow" href="http://www.mogujie.com/register/">注册</a>',"</li>",'<li class="s1 show-nologin">','<a rel="nofollow" href="http://www.mogujie.com/login/">登录</a>',"</li>","{{?}}",'<li class="s1 myorder has_line">','<a href="http://order.mogujie.com/order/list4buyer" target="_blank" class="text display_u" ref="nofollow">我的订单</a>',"</li>",'<li class="s1 has_line shopping_cart_v2">','<a class="cart_info_wrap" href="http://cart.mogujie.com/cart/mycart" target="_blank" ref="nofollow">','<span class="cart_info">购物车</span>',"</a>",'<i class="icon_delta"></i>','<span class="shopping_cart_loading"></span>',"</li>",'<li class="s1 has_line has_icon custom_item">','<a rel="nofollow" href="http://www.mogujie.com/service/" ref="nofollow" target="_blank">客户服务</a>','<i class="icon_delta"></i>','<ol class="ext_mode">','<li class="s2"><a target="_blank" rel="nofollow" href="http://www.mogujie.com/help">消费者服务</a></li>','<li class="s2"><a target="_blank" rel="nofollow" href="http://www.xiaodian.com/pc/shopadmin/help/home/">商家服务</a></li>','<li class="s2"><a target="_blank" rel="nofollow" href="http://www.mogujie.com/rule/index">规则中心</a></li>',"</ol>","</li>",'<li class="s1 has_line has_icon myxiaodian">','<a href="http://www.xiaodian.com" ref="nofollow" target="_blank" class="text display_u">我的小店</a>','<i class="icon_delta"></i>','<ol class="ext_mode">','<li class="s2"><a target="_blank" rel="nofollow" href="http://www.xiaodian.com/pc/shopadmin/shopface">管理后台</a></li>','<li class="s2"><a target="_blank" rel="nofollow" href="http://bbs.xiaodian.com">商家社区</a></li>','<li class="s2"><a target="_blank" rel="nofollow" href="http://peixun.xiaodian.com">商家培训</a></li>','<li class="s2"><a target="_blank" rel="nofollow" href="http://www.xiaodian.com/pc/joinmarket">市场入驻</a></li>',"</ol>","</li>","</ul>"].join(""));n.fn.getUserData(function(a,o){a||(t.html(n.ui.getTemplate(e,o)),$("body").trigger("userdatarecieve",[o]))})}function o(t){$("#header .header_top"),$(".mgj_rightbar .mgj-my-cart"),$(".mgj_rightbar .mgj-my-avatar");t.uname&&t.uname.length>0&&t.shopFaved&&$(".J-shop-follow").addClass("shop-followed").html("已收藏"),t.jumpUrl&&t.jumpUrl.length>0&&(location.href=t.jumpUrl)}function i(){function t(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(e);return null!=a?unescape(a[2]):null}function e(t,e){var a=new Date;a.setTime(a.getTime()+31536e6),document.cookie=t+"="+escape(e)+";expires="+a.toGMTString()}function a(t){var e,a=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(a))?unescape(e[2]):null}var o=$("#menu_personal"),i=$(".dapei_tip",o),n=$(".dapei_btn",o);n.click(function(){e("dapei_tip_hidden",!0),i.hide(),setTimeout(function(){o.mouseleave(function(){$(this).removeClass("ext_mode_show")})},1e3)}),null!=t("isDaPeiShi")?o.addClass("ext_mode_show"):"true"==$("#isDaPeiShi").val()&&null==a("dapei_tip_hidden")&&o.addClass("ext_mode_show")}var n=window.MoGu||{};n.fn=n.fn||{},window.log_stat_url_tmp=window.log_stat_url_tmp||"",$.extend(n.fn,{greyTest:function(t,e){$.ajax({url:"http://www.mogujie.com/trade/abtest/service/getBucket",data:{biz:t},type:"get",dataType:"jsonp",success:function(t){$.isFunction(e)&&e(null,t)},fail:function(t){$.isFunction(e)&&e(t)}})},getUserData:t(function(t){if(n.data=n.data||{},n.data.userData)$.isFunction(t)&&t(null,n.data.userData);else{var e=location.protocol||"http:";$.ajax({url:e+"//portal.mogujie.com/api/profile/baseinfo",dataType:"jsonp",type:"get",success:function(e){if(1001==e.status.code){var a=e.result;n.data.userData=a,$.isFunction(t)&&t(null,a)}else{var a={};n.data.userData=a,$.isFunction(t)&&t(null,a)}},fail:function(e){$.isFunction(t)&&t(e)}})}},100)}),n.fn.id2url=function(t,a){var o="",i=a||1;if(t=""+t,24==t.length)return t;switch(i){case 1:o=i+e(2*t+56,10,36);break;default:o=!1}return o};var s=$(".header_2015"),r=$(".mgj_rightbar");a(),window.ESIMOGUPROFILE&&o(MOGUPROFILE),i();var l=(n.ui.getdoT(),{});l.Tpl={headerMsgTpl:[]},l.View={init:function(){this.addEvent()},addEvent:function(){var t=this;$("body").on("cinfodatarecieve",function(e,a){if(a){var o=a,i={};i.twitterNew=parseInt(o.cmessageNew),i.catmeNew=parseInt(o.a),i.cfavedNew=parseInt(o.b),i.cmsgNew=parseInt(o.c),i.fansNew=parseInt(o.d),i.csysmsgNew=parseInt(o.e),i.cactiveNew=parseInt(o.f),i.intelligent=parseInt(o.g),i.ccartNew=parseInt(o.h),i.chatNew=parseInt(o.i),i.ccouponShop=parseInt(o.q),i.ccouponPlatform=parseInt(o.j),$.each(t.renders,function(t,e){$.isFunction(e)&&e(i)})}})},renders:{renderNavCart:function(t){var e=s.find(".shopping_cart_v2");if(e.length)if(t.ccartNew>0){var a=t.ccartNew>99?"99+":t.ccartNew,o='<span class="cart_info">购物车<b class="num">'+a+"</b>件</span>";e.find(".cart_info_wrap").html(o).show()}else e.find(".cart_info_wrap").html('<span class="cart_info">购物车</span>')},renderSideBarCart:function(t){var e=r.find(".mgj-my-cart");e.length&&(t.ccartNew>0?e.find(".num").html(t.ccartNew>99?"99+":t.ccartNew).show():e.find(".num").hide())},renderSideBarCoupon:function(t){var e=r.find(".mgj-my-coupon");if(e.length){var a=parseInt(t.ccouponShop+t.ccouponPlatform,10);a?e.find(".num").html(a>99?"99+":a).show():e.find(".num").hide()}},renderNavMsg:function(t){var e=s.find(".mogutalk_btn");e.length&&(t.chatNew?e.find(".num").html(t.chatNew>99?"99+":t.chatNew).show():e.find(".num").hide())}}},l.View.init();var c=function(){this.highClassName="s1_on"};c.prototype={add2Collection:function(t){$.browser.msie&&6==$.browser.version&&$.isPlainObject(t)&&t.wrap.length&&t.target&&this._registerEvent(t)},_registerEvent:function(t){var e=this;t.wrap.on("mouseenter",t.target,function(t){$(this).addClass(e.highClassName).siblings().removeClass(e.highClassName)}),t.wrap.on("mouseleave",t.target,function(t){$(this).removeClass(e.highClassName)})}},(new c).add2Collection({wrap:$(".header_top"),target:".s1"})}.apply(e,o),!(void 0!==i&&(t.exports=i))},function(t,e,a){var o,i;o=[],i=function(){function t(t){var e=a.template(i)(t);o.show(),0===o.length?$("#header").eq(0).after(e):o.html(e)}var e=window.MoGu||{},a=e.ui.getdoT(),o=$(".promotionTopNavContainer"),i=$(".topnavPromotionTpl").html();jsonp7485backup=function(e){e&&e.data&&e.data.list.length>0&&($(".promotionTopNavContainer").css("backgroundColor",e.data.list[0].topNavBg),t(e.data.list))},$.ajax({url:"http://mce.mogucdn.com/jsonp/get/3",method:"GET",dataType:"jsonp",cache:!0,data:{pid:7485},jsonpCallback:"jsonp7485",success:function(e){if("SUCCESS"===e.returnCode&&e.success){if(!(e&&e.data&&e.data.list.length>0))return;$(".promotionTopNavContainer").css("backgroundColor",e.data.list[0].topNavBg),t(e.data.list)}else{var a=document.createElement("script");a.src="http://mcebackup.mogucdn.com/jsonp/get/3%3Fpid=7485&callback=jsonp7485backup",document.getElementsByTagName("head")[0].appendChild(a)}}})}.apply(e,o),!(void 0!==i&&(t.exports=i))},function(t,e,a){var o,i;o=[a(4)],i=function(t){var e=1260,a=$(".mgj_rightbar"),o=MoGu.ui.getTemplate(t);a.html(o);var i={goTop:a.find(".mgj-back2top"),sidebar:a,sidebarCart:a.find(".mgj-my-cart"),init:function(){return"Microsoft Internet Explorer"==navigator.appName&&"MSIE6.0"==navigator.appVersion.split(";")[1].replace(/[ ]/g,"")?void $(".mgj_rightbar").hide():(this.sidebar.show(),void(this.goTop.length&&(this.offsetEl=$(".wrap").length?$(".wrap").eq(0):$("#body_wrap"),this.offsetEl.length&&(this.win=$(window),this.setSidebarPos(),this.addEvent()))))},addEvent:function(){var t=this;this.win.on("resize",function(e){t.setSidebarPos()});var a=['<a target="_blank" href="http://www.mogujie.com/member/" rel="nofollow">','<div class="img">','<img width="20" height="20" src="{{=it.avatar}}_48x48.jpg" alt="">',"</div>","</a>"].join("");$("body").on("userdatarecieve",function(t,e){e.avatar&&$(".mgj_rightbar .mgj-my-avatar").html(MoGu.ui.getTemplate(a,e))}),this.sidebarCart.off().on("mouseenter",function(){t.win.width()>e||t.showSidebar()}),this.sidebar.off().on("mouseleave",function(){t.win.width()>e||t.hideSidebar()}),this.win.on("scroll",function(e){$(this).scrollTop()?t.goTop.addClass("show"):t.goTop.removeClass("show")}),this.goTop.on("click",function(e){return t.win.scrollTop(0),!1})},setSidebarPos:function(){var t=(this.offsetEl.offset(),this.offsetEl.outerWidth(),this.win.width());e>t?this.hideSidebar():this.showSidebar()},showSidebar:function(){this.sidebarCart.stop().animate({left:"0"}),this.goTop.stop().animate({left:"0"}),this.sidebar.removeClass("mini").stop().animate({right:"0"})},hideSidebar:function(){this.sidebarCart.stop().animate({left:"-30px"}),this.goTop.stop().animate({left:"-30px"}),this.sidebar.addClass("mini").stop().animate({right:"-30px"})}};i.init()}.apply(e,o),!(void 0!==i&&(t.exports=i))},function(t,e){t.exports='<!--空的右侧边栏-->\n<div id="mgj_rightbar_top_blank" class="mgj_rightbar_960"></div>\n<!--方便定margin的空dediv-->\n<div id="mgj_rightbar_blank_div"></div>\n<!--用户头像-->\n<div class="sidebar-item mgj-my-avatar"></div>\n<!--购物车-->\n<div class="sidebar-item mgj-my-cart">\n    <a target="_blank" href="http://cart.mogujie.com/cart/mycart" rel="nofollow">\n        <i class="s-icon"></i>\n        <div class="s-txt">购物车</div>\n        <div class="num"></div>\n    </a>\n</div>\n<!--优惠券-->\n<div class="sidebar-item mgj-my-coupon">\n    <a target="_blank" rel="nofollow" href="http://www.mogujie.com/trade/promotion/user/shopcoupon/">\n        <i class="s-icon"></i>\n        <div class="s-txt">优惠券</div>\n        <div class="num"></div>\n    </a>\n</div>\n<!--钱包-->\n<div class="sidebar-item mgj-my-wallet">\n    <a target="_blank" rel="nofollow" href="https://f.mogujie.com/wallet/home/">\n        <i class="s-icon"></i>\n        <div class="s-txt">钱包</div>\n    </a>\n</div>\n<!--足迹-->\n<div class="sidebar-item mgj-my-browserlog">\n    <a target="_blank" rel="nofollow" href="http://www.mogujie.com/active/browserlog">\n        <i class="s-icon"></i>\n        <div class="s-txt">足迹</div>\n    </a>\n</div>\n<div class="sideBottom">\n    <!--回到顶部-->\n    <div class="sidebar-item mgj-back2top"><a rel="nofollow" href="javascript:;"><i class="s-icon"></i></a></div>\n</div>\n'},function(t,e,a){var o,i;o=[],i=function(){var t={},e=['<div class="shop_cart_info" style="display: none;">','<ul class="max_height_ie6">',"{{~ it.list:item:index}}","{{?index < it.topNum}}","<li>",'<a rel="nofollow" href="http://shop.mogujie.com/detail/{{=item.itemIdEsc}}" target="_blank" class="imgbox">',"{{?item.imgUrl}}",'<img src="{{=item.imgUrl}}" alt="{{=item.title}}" width="45">',"{{?}}","</a>",'<a rel="nofollow" href="http://shop.mogujie.com/detail/{{=item.itemIdEsc}}" target="_blank" class="title">{{=item.title}}</a>',"{{?item.skuAttributes}}",'<span class="info">{{~ item.skuAttributes:sku:key }}{{=sku.key}}: {{=sku.value}}  {{~}}</span>',"{{?}}",'<span class="price">¥{{=(item.nowprice/100)}}</span>','<span data-stockid="{{=item.stockIdEsc}}" class="del">删除</span>',"</li>","{{?}}","{{~}}","</ul>",'<div class="subbox">',"{{?it.total-it.topNum>0}}",'<p class="sub_info">购物车里还有<b class="num">{{=it.total - it.topNum}}</b>件商品</p>',"{{?}}",'<div class="fr">','<a rel="nofollow" href="http://cart.mogujie.com/cart/mycart" target="_blank" class="goel">查看购物车</a>',"</div>","</div>","</div>"].join("");t.Model={goodsList:"",offlineCartCookies:"",offlineCartCookiesOld:"",goodsNum:0,getGoodsList:function(t){var e=this;if(e.goodsList)return void($.isFunction(t)&&t(this.goodsList));var a=[];if(MoGu.util.getCookie("trade_cart_mogujie")?e.offlineCartCookies=MoGu.util.getCookie("trade_cart_mogujie"):MoGu.util.getCookie("mogu_trade_cart")&&(e.offlineCartCookiesOld=MoGu.util.getCookie("mogu_trade_cart")),e.offlineCartCookies){var o=JSON.parse(e.offlineCartCookies);for(var i in o){var n={};n.stockId=i;for(var s in o[i])n[s]=o[i][s];a.push(n)}}if(e.offlineCartCookiesOld)for(var o=e.offlineCartCookiesOld.split(","),n={},s=0;s<o.length;s++)if(o[s].indexOf("#")>-1){var r=o[s].split("#");n.number=r[0],n.lastAddCartTime=r[1],a.push(n),n={}}else n.stockId=MoGu.fn.id2url(o[s]);var l={marketType:"market_mogujie",topNum:e.maxShowNum,offlineCartItems:JSON.stringify(a)};$.ajax({url:"/api/cart/miniCartList",data:l,dataType:"json",type:"post",success:function(a){1001==a.status.code?(e.goodsList=a.result.cartItems?a.result.cartItems:[],e.goodsNum=a.result.totalItemNum||0,$.isFunction(t)&&t(e.goodsList)):$.isFunction(t)&&t([])}})},delCookie:function(t,e){var a={};if(this.offlineCartCookies){var o=JSON.parse(this.offlineCartCookies);for(var i in o)i!=t&&(a[i]=o[i]);MoGu.util.setCookie("trade_cart_mogujie",JSON.stringify(a),{expires:15,path:"/",domain:".mogujie.com"})}},delGood:function(t,e){var a=this;$.post("/api/cart/deleteCart",{marketType:"market_mogujie",stockId:t},function(o){if(1001==o.status.code){var i=o.status.isLogin;i||a.delCookie(t),$.isFunction(e)&&e()}else alert(o.status.msg)},"json")}},t.View={wrap:$(".header_2015"),init:function(){this.wrap.length&&(this.extendInfo=null,this.loading=this.wrap.find(".shopping_cart_loading"),this.maxShowNum=5,this.addEvent())},addEvent:function(){var a=this;this.wrap.find(".cart_info_wrap").attr("href","http://cart.mogujie.com/cart/mycart"),$(".mgj_rightbar .mgj-my-cart a").attr("href","http://cart.mogujie.com/cart/mycart"),a.wrap.off("mouseenter").on("mouseenter",".shopping_cart_v2",function(o){var i=$(this);i.addClass("sc_on"),a.loading.show(),a.extendInfo&&a.extendInfo.length?(a.loading.hide(),a.extendInfo.show()):t.Model.getGoodsList(function(o){var n={list:o,topNum:a.maxShowNum,total:t.Model.goodsNum};if(o.length){var s=MoGu.ui.getTemplate(e,n);a.extendInfo=$(s)}else{var s='<div class="shop_cart_info"></div>';a.extendInfo=$(s),a.extendInfo.addClass("empty_cart").text("购物车里没有商品！")}i.append(a.extendInfo),a.loading.hide(),a.extendInfo.show()})}),a.wrap.off("mouseleave").on("mouseleave",".shopping_cart_v2",function(t){a.extendInfo&&a.extendInfo.hide()&&$(this).removeClass("sc_on")}),a.wrap.off("click").on("click",".shopping_cart_v2 .del",function(){var e=$(this),o=e.data("stockid"),i=(a.wrap.find(".num"),e.parent()),n=t.Model.goodsNum;e.hasClass("disabled")||(e.addClass("disabled"),t.Model.delGood(o,function(){n--,i.fadeOut("slow",function(){e.removeClass("disabled"),n?(i.remove(),t.Model.goodsNum=n):(a.extendInfo=$(".shop_cart_info"),a.extendInfo.addClass("empty_cart").text("购物车里没有商品！"))})}))})}},t.View.init()}.apply(e,o),!(void 0!==i&&(t.exports=i))},function(t,e,a){var o;o=function(){var t={wrap:$(".back2top_wrap"),init:function(){this.wrap.length&&(this.offsetEl=$(".wrap").length?$(".wrap").eq(0):$("#body"),this.offsetEl.length&&(this.win=$(window),this.goTop=this.wrap.find(".go_top"),this.setPos(),this.wrap.show(),this.addEvent()))},addEvent:function(){var t=this;this.win.on("resize",function(e){t.setPos()}),this.win.on("scroll",function(e){$(this).scrollTop()?t.goTop.addClass("show"):t.goTop.removeClass("show")}),this.goTop.on("click",function(e){return t.win.scrollTop(0),!1})},setPos:function(){var t=this.offsetEl.offset(),e=this.offsetEl.outerWidth(),a=this.win.width(),o=this.wrap.width(),i=15,n=t.left+e+20;o+n+i>a?this.wrap.css({left:"auto",right:i}):this.wrap.css({left:n,right:"auto"})}};t.init()}.call(e,a,e,t),!(void 0!==o&&(t.exports=o))}])}),"function"==typeof define&&define.amd&&require(["pc/common/nav/index"]);!function(e){"use strict";function t(){this.arr="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",this.arrLen=this.arr.length}function n(){var e=p.getPtpInfoAndExtra(),t=c.getValue(g.pEventId);s.logData("p",t,e),g.EnableLogMoGuJs&&s.sendLog(g.LogMoGuJsUrl,e,!0)}function r(){if(o.info.isNative){var e=p.getPtpCnt();s.logAppPevent(e)}else l?n():c.listenTo("LoggerReady",function(){n()})}var o=e.logger={};o.version="0.1.9","undefined"==typeof console&&(window.console={log:function(){}});var i="**logger.js---打点出错:";!function(){var e=window.jQuery||window.Zepto,t=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]==t)return n+1;return-1},n={getA:function(e){var t=e;if("A"==t.tagName)return e;for(;t.parentNode;)if(t=t.parentNode,"A"==t.tagName)return t},getParentByClass:function(t,n){if(t){if(e)return $(t).parents("."+n);for(var r,o=t;o.parentNode;)if(o=o.parentNode,r=o.className&&-1!=o.className.indexOf(n))return o}},getParents:function(t,n){if(t){if(n=n||"",e)return n="["+n+"]",$(t).parents(n)[0];for(var r,o=t;o.parentNode;)if(o=o.parentNode,r=o.getAttribute&&o.getAttribute(n))return o}},getIndex:function(n,r,o){if(!n||!r||!o)return 0;if(e)return $("["+n+'="'+r+'"]').index($(o))+1;if(document.querySelectorAll){var i=document.querySelectorAll("["+n+'="'+r+'"]');return t(i,o)}return 1},getElemIndex:function(n,r,o){if(!n||!r||!o)return 0;if(e)return $(n).find(r).index($(o))+1;if(n.querySelectorAll){var i=n.querySelectorAll(r);return t(i,o)}return 1},is:function(e,t){return e&&t?(e.length&&(e=e[0]),e.nodeName.toLowerCase()===t.toLowerCase()?!0:void 0):!1}};o.jq=n}();var a=1001,u={},c={getIEVersion:function(){var e,t=-1,n=navigator.userAgent;return"Microsoft Internet Explorer"==navigator.appName?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&(t=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&(t=parseFloat(RegExp.$1))),t},stringify:function(e){if("undefined"!=typeof JSON)return JSON.stringify(e);var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,r,o=[],i=e&&e.constructor==Array;for(n in e)r=e[n],t=typeof r,e.hasOwnProperty(n)&&("string"==t?r='"'+r+'"':"object"==t&&null!==r&&(r=c.stringify(r)),o.push((i?"":'"'+n+'":')+String(r)));return(i?"[":"{")+String(o)+(i?"]":"}")},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},getCookieInArray:function(e){for(var t=0,n=e.length;n>t;t++){var r=c.getCookie(e[t]);if(r)return r}return""},getCookieOrFunc:function(e){return"function"==typeof e?c.getValue(e):c.getCookie(e)},getCookie:function(e){if(c.isArray(e))return c.getCookieInArray(e);var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==t?decodeURIComponent(t[2]):""},getQuery:function(e,t){void 0===t&&(t=location.search),t=t.split("#")[0];var n="(^|&|\\?)"+e+"=([^&]*)(&|$)",r=new RegExp(n,"i"),o=t.substr(1).match(r);return null!==o?decodeURIComponent(o[2]):""},setQuery:function(e,t,n){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+o+t+"="+n},getTime:function(){return parseInt((new Date).getTime()/1e3)},registerEvent:function(e,t,n){window.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},extend:function(){for(var e=arguments,t=arguments[0],n=1;n<e.length;n++){var r=e[n];for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t},getValue:function(e){if(e){if("function"==typeof e)try{var t=Array.prototype.slice.call(arguments,1);return e.apply(null,t)}catch(n){return console.log(i+n),""}return e}},loadScript:function(e,t){var n=document.createElement("script");n.src=e+"?callback=callback_"+a,window["callback_"+a]=function(e){t&&t(e)},a+=1;var r=document.getElementsByTagName("head")[0];r.appendChild(n)},listenTo:function(e,t){u[e]||(u[e]=[]),u[e].push(t)},fire:function(e){var t=u[e];if(t.length){for(var n=0,r=t.length;r>n;n++)t[n].call();u[e]=[]}}};o.util=c;var d="https:"===location.protocol?"https:":"http:",f="mogujie";-1!=location.host.indexOf("meilishuo")&&(f="meilishuo"),o.config={EnableLogMoGuJs:!0,LogUrl:d+"//log.juangua.com/log.php",LogMoGuJsUrl:d+"//log.juangua.com/mogu.js",CookieUrl:d+"//portal."+f+".com/api/util/getUuid",shouldRequestCookie:function(){if(-1!=location.protocol.indexOf("file:"))return!1;var e=o.util.getCookieOrFunc(o.config.uuid);return!e},uuid:["__mgjuuid","__xduuid"],uid:"__ud_",sfrom:"from_site",cpsinfo:"__cpsinfo",ptp_cnt_a:"",ptp_cnt_b:"",ptp_cnt_c_d:"",platform:function(){var e=navigator.userAgent.toLowerCase();return/qq\/([\d\.]+)/.test(e)?48:void 0},pEventId:"1001",isMobileRe:/iphone|android|ipad/i,ptpRe:/[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+/i,hrefRe:/http[s]?:\/\/\w+\.(mogujie|xiaodian|uniny)\.com([\/]|\/.*|)$/,mgjRe:/mgj:\/\//,mtRe:/\?.*[&]?mt=([^\.]+)\.([^\.]+)\.([^\.&#]+)/,chasing:["f","f2","mlf"],urlExtend:["acm"],extra:{},isNativeRe:/mogujie(?!nonative)/i,nativeLog:{}},window.PTP_PARAMS&&c.extend(o.config,PTP_PARAMS),t.prototype={rand:function(e){var t,n="";for(t=0;e>t;t++)n+=this.arr.charAt(Math.random()*this.arrLen);return n},pageHash:function(e){var t=5381,n=e.length-1;if("string"==typeof e)for(;n>-1;n--)t+=(t<<5)+e.charCodeAt(n);else for(;n>-1;n--)t+=(t<<5)+e[n];var r=2147483647&t,o="";do o+=this.arr.charAt(61&r);while(r>>=6);return o}},function(){var e=o.config,t=navigator.userAgent.toLocaleLowerCase();o.info={isApp:e.isNativeRe.test(t),isNative:e.isNativeRe.test(t),isMobile:e.isMobileRe.test(t),isIos:t.indexOf("iphone")>-1,isAndroid:t.indexOf("android")>-1,isXd:location.href.indexOf(".xiaodian.")>-1}}(),function(){function e(e,t){for(var n,r=0;r<e.length;r++)if(n=new RegExp(e[r]),n.test(t))return!0;return!1}o.needReferFix=!1;var t=navigator.userAgent.toLocaleLowerCase(),n=o.info.isApp&&o.info.isAndroid,r=-1!=t.indexOf("meilishuo"),i=-1!=t.indexOf("mogujie"),a=-1!=t.indexOf("referfix=1"),u=["^http://(m|www).mogujie.com/x6/wall/book/([a-z]+)/?(\\S*)$","^http://(m|www).mogujie.com/x6/marketchannel\\?(\\S*)$","^http://(m|www).mogujie.com/x6/detail/(\\w*)[\\?]?(\\S*)$","^http://(m|www).mogujie.com/x6/shop/(.*?)/goodsall[\\?]?(\\S*)$","^http://(m|www).mogujie.com/x6/account/getprofile[\\?].*?uid=(\\w*).*?$","^http://(m|www).mogujie.com/x6/attention/lifestyle[\\?].*?id=(\\w*).*?((ptp|url_ptp)=([\\w.]+))?$","^http://(m|www).mogujie.com/x6/shop/(\\w+)/?(\\?(.*))?$","^http://(m|www).mogujie.com/x6/book/([a-z]+)/?(\\S*)$","^http://(m|www).mogujie.com/x6/search/?\\?keywords=([^&]+)(\\S*)$"],c=["^https?://sgitem.meilishuo.com/sgdetail/(\\w+)/?\\??(.*?)$","^https?://item.meilishuo.com/h5/detail/(\\w+)/?\\??(.*?)$","^https?://www.mogujie.com/trade/order/detail4buyer\\?.*?orderId=(\\w+).*?$","^https?://www.mogujie.com/trade/refund/detail\\?.*?itemOrderId=(\\w+).*?$","^(http|https)://sgitemapp.meilishuo.com/sgdetail/(\\w+).*?$","^https?://act.meilishuo.com/keyword/?\\??(.*?)?$","^https?://weixin.meilishuo.com/wx/shop/(\\w+)/?\\??(.*?)$"];o.matchNativeLink=e;var d=function(t){return-1!=t.indexOf("mls://")?!0:e(c,t)},f=function(t){return-1!=t.indexOf("mgj://")?!0:-1==t.indexOf("/x6/")?!1:e(u,t)};o.isMgjNativeLink=f;var p=function(){var e="";if(n){if(a)return!0;var o=t.match(/\/(\d{3})\//);if(o&&o[1]){if(e=parseInt(o[1]),r&&832>=e)return!0;if(i&&806>=e)return!0}}return!1},g=function(e){return o.util.setQuery(e,"_isfilter","1")};o.needReferFix=p(),o.fixReferUrl=function(e){return r&&d(e)?e:i&&f(e)?e:g(e)}}(),function(){function e(){var e="1";return s.isMobile&&(e="m1"),s.isIos&&s.isNative?e="am0":s.isAndroid&&s.isNative&&(e="am1"),e}function n(){var e=c.getValue(g.ptp_cnt_b);if(e)return e;var t="",n=location.href.split("?")[0];return t=m.pageHash(n)}function r(){var e=c.getCookieOrFunc(g.cpsinfo);return e?e=e.replace("-",","):""}function i(){var e=c.getValue(g.platform);return e?e:s.isMobile?32:31}function a(e){if(e){var t=c.getValue(g.ptp_cnt_c_d,e);if(t)return t;var n=e.getAttribute("data-ptp-customc");if(n)return{c:n,d:l.getIndex("data-ptp-customc",n,e)};if(e=l.getParents(e,"data-ptp-customc"))return n=e.getAttribute("data-ptp-customc"),n?{c:n,d:l.getIndex("data-ptp-customc",n,e)}:void 0}}function u(){-1!=location.protocol.indexOf("file:")&&document.addEventListener("deviceready",function(){window.hybrid&&hybrid.bundle&&hybrid.bundle.getUrl&&hybrid.bundle.getUrl(function(e){v&&(v.refer=e)})},!1)}function d(){return u(),{time:c.getTime(),sfrom:c.getCookieOrFunc(g.sfrom),uuid:c.getCookieOrFunc(g.uuid),uid:c.getCookieOrFunc(g.uid),cpsinfo:r(),refer:location.href,rerefer:document.referrer,ptp_url:c.getQuery("ptp",location.search),ptp_ref:c.getQuery("ptp",document.referrer)}}function f(){return{a:e(),b:n(),c:0,d:0,e:m.rand(5)}}var p,g=o.config,s=o.info,l=o.jq,m=new t,v=d(),h=f();o.ptp=p={getPtpByType:function(e,t){var n=i(),r=[v.time,0,"p/e",n,o.version,"1001",v.uuid,v.uid,v.refer,v.rerefer];return"p"==e?(t=t||"1001",r[2]="p",r[5]=t,r):"e"==e?(t=t||"50001",r[2]="e",r[5]=t,r):void 0},getPtpCnt:function(e,t){return e||(e=h.c),t||(t=h.d),[h.a,h.b,e,t,h.e].join(".")},getPtpInfo:function(){var e={};return c.extend(e,v,{ptp_cnt:p.getPtpCnt()})},getPtpInfoAndExtra:function(){var e=p.getPtpInfo(),t={};if(g.extra)for(var n in g.extra)g.extra.hasOwnProperty(n)&&(t[n]=c.getValue(g.extra[n]));return c.extend(e,t)},createPtpCnt:function(e){var t=a(e),n=0,r=0;if(t)return p.getPtpCnt(t.c,t.d);var o=l.getParents(e,"data-ptp"),i=l.getParentByClass(e,"data-ptp-item");return o&&(n=o.getAttribute("data-ptp"),r=i?l.getElemIndex(o,".data-ptp-item",i):l.getElemIndex(o,"a",e)),r||(r=0),p.getPtpCnt(n,r)},makeUrl:function(e,t,n){var r=e.match(/(#.+)$/);return e=e.replace(/(#.+)$/,""),e=c.setQuery(e,"ptp",t),e=p.getChasingParams(e),e=p.getExtendParams(n,e),o.needReferFix&&(e=o.fixReferUrl(e)),r&&(e+=r[1]),e},getChasingParams:function(e){void 0===e&&(e="");var t=e;if(!g.chasing)return t;g.chasing.length||(g.chasing=[g.chasing]);for(var n,r,o=0,i=g.chasing.length;i>o;o++)n=g.chasing[o],r=c.getQuery(n),r&&(t=c.setQuery(t,n,r));return t},getExtendParams:function(e,t){var n=t;if(!e||!l.is(e,"a"))return n;e.length&&(e=e[0]);for(var r=g.urlExtend||[],o=0,i=r.length;i>o;o++){var a=r[o],u=e.getAttribute("data-ext-"+a);u&&(n=c.setQuery(n,a,u))}return n},refreshPtp:function(){v=d(),h=f()},refreshCookie:function(){v&&(v.sfrom=c.getCookieOrFunc(g.sfrom),v.uuid=c.getCookieOrFunc(g.uuid),v.uid=c.getCookieOrFunc(g.uid),v.cpsinfo=r())}}}(),function(){var e=o.info,t=o.ptp,n=o.config,r=0,a=function(e,t){t=t||{};var n=[];for(var r in t){var o=t[r];o||(o=""),o=encodeURIComponent(o),n.push(r+"="+o)}n=n.join("&"),e=e.indexOf("?")>-1?e+"&"+n:e+"?"+n;var i=new Image;i.src=e},u=function(e,t){t=t||{};var n,o=r++;try{n=document.createElement('<iframe name="'+o+'">')}catch(a){n=document.createElement("iframe"),n.setAttribute("name",o)}try{n.style.display="none",document.body.appendChild(n),n.contentWindow.name=o;var u=document.createElement("form");u.setAttribute("method","POST"),u.setAttribute("action",e),u.setAttribute("target",o);for(var d in t)if(t.hasOwnProperty(d)){var f=document.createElement("input");f.setAttribute("type","hidden"),f.setAttribute("name",d),f.setAttribute("value",t[d]),u.appendChild(f)}document.body.appendChild(u),u.submit(),c.registerEvent(n,"load",function(){try{document.body.removeChild(u),document.body.removeChild(n)}catch(e){}})}catch(a){console.log(i+a)}},d={sendLog:function(e,t,n){var r=c.getIEVersion(),o=-1!=r&&8>=r;o&&!n?u(e,t):a(e,t)},sendAppLog:function(e,t){return e+="",n.nativeLog&&n.nativeLog.logE?n.nativeLog.logE(e,t):void(window.hdp&&window.hdp["do"]?hdp["do"]("mgj.tracker.sendEvent",e,t):document.addEventListener("deviceready",function(){window.mgj&&mgj.tracker&&mgj.tracker.sendEvent&&mgj.tracker.sendEvent(e,t)},!1))},logAppPevent:function(e){return n.nativeLog&&n.nativeLog.logP?n.nativeLog.logP(e):void(window.hdp&&window.hdp["do"]?hdp["do"]("mgj.pevent",e).then(function(){},function(e){console.log("pevent:"+e)}):document.addEventListener("deviceready",function(){window.mgj&&mgj.pevent&&mgj.pevent(function(){},null,e)},!1))},logData:function(r,o,i){var a=t.getPtpByType(r,o);a.push(c.stringify(i)),e.isNative?d.sendAppLog(o,i):d.sendLog(n.LogUrl,{v:1,data:a.join("	")})}};o.send=d}(),function(){function e(e){var t=e.href;if(!(t.indexOf("mogujie.com/mtalk/")>-1)&&(n.hrefRe.test(t)||n.mgjRe.test(t))){var o=e.getAttribute("data-ptp-cache-id");t=e.getAttribute("href"),o&&n.ptpRe.test(o)||(o=r.createPtpCnt(e),e.setAttribute("data-ptp-cache-id",o)),e.href=r.makeUrl(t,o,e)}}function t(t){var n=t||window.event,r=n.target||n.srcElement,o=i.getA(r),a="AREA"===r.nodeName?r:null;a&&(o=a),o&&(o.href&&o.href.indexOf("javascript:")>-1||e(o))}var n=o.config,r=o.ptp,i=o.jq,a="tap"in document.createElement("div")?"tap":"mousedown";c.registerEvent(document,a,t),c.registerEvent(document,"touchstart",t)}();var p=o.ptp,g=o.config,s=o.send,l=!g.shouldRequestCookie();if(l||c.loadScript(g.CookieUrl,function(){l=!0,o.ptp.refreshCookie(),c.fire("LoggerReady")}),r(),o.refreshPevent=function(){o.ptp.refreshPtp(),r()},o.log=function(e,t){if(void 0!==e){t=t||{};var n=p.getPtpInfoAndExtra();l?o.send.logData("e",e,c.extend({},n,t)):c.listenTo("LoggerReady",function(){var n=p.getPtpInfoAndExtra();o.send.logData("e",e,c.extend({},n,t))}),window.MtaH5&&MtaH5.clickStat&&MtaH5.clickStat(e,t)}},o.generatePtpParams=function(e,t){if(void 0!==e){var n="";return n=t?p.createPtpCnt(t):p.getPtpCnt(),p.makeUrl(e,n,t)}},o.needReferFix&&document.referrer){var m=p.getPtpInfoAndExtra();o.log("016000616",{ptp_cnt2:m.ptp_cnt,ptp_url2:m.ptp_url,ptp_ref2:m.ptp_ref})}"undefined"!=typeof module&&"object"==typeof exports?module.exports=o:"function"==typeof define&&(define.amd||define.cmd)&&define("logger",function(){return o})}(window);!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function r(e){return e=e||{},e.extra=e.extra||{},"e"===e.type?p.constructTraceData(e):"n"===e.type?p.constructNetworkData(e):e}var i=n(1),o=n(3),a=n(5),s=n(10),d=n(6),u=(n(9),n(2)),c=n(4),p=n(8),f=n(7);try{f.init(),d.init(),a.init(),s.init(),u.addEventListener(window,"load",function(){d.send(p.constructNetworkData({type:"n",url:u.formatUrl(location.href),responseCode:200,responseSize:c.BLANK_VALUE,responseTime:o.getResponseTime(),bizCode:c.BLANK_VALUE,extra:{}})),d.send(p.constructTraceData({type:"e",extra:u.extend({performanceEvent:!0,eventid:c.eventidMap[i.getPlatform()]},i.getAll(),o.getOnload())}))})}catch(g){}var l={send:function(e){d.send(r(e))},sendImmediately:function(){d.sendImmediately(r(data))}};window._trace||(window._trace=l),window.Mogu&&window.Mogu.util&&(window.Mogu.util.trace=l)},function(e,t,n){function r(){var e=navigator.appVersion;return/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(e)?"h5":"pc"}function i(){var e,t,n=(navigator.appVersion,navigator.userAgent),r="其它",i=r,o="",a="";return-1!=(e=n.indexOf("Opera"))&&(i="Opera",o=n.substring(e+6),-1!=(e=n.indexOf("Version"))&&(o=n.substring(e+8))),-1!=(e=n.indexOf("OPR"))?(i="Opera",o=n.substring(e+4)):-1!=(e=n.indexOf("MSIE"))?(i="IE",o=n.substring(e+5)):-1!=(e=n.indexOf("Chrome"))?(i="Chrome",o=n.substring(e+7)):-1!=(e=n.indexOf("Safari"))?(i="Safari",o=n.substring(e+7),-1!=(e=n.indexOf("Version"))&&(o=n.substring(e+8))):-1!=(e=n.indexOf("Firefox"))?(i="Firefox",o=n.substring(e+8)):-1!=n.indexOf("Trident/")?(i="IE",o=n.substring(n.indexOf("rv:")+3)):-1!=n.toLowerCase().indexOf("mogujie")?i="Mogujie":-1!=n.indexOf("MicroMessenger")?i="Wechat":-1!=n.indexOf("QQ")?i="QQ":-1!=n.indexOf("Weibo")?i="Weibo":-1!=n.indexOf("baiduboxapp")&&(i="Baidu"),-1!=(t=o.indexOf(";"))&&(o=o.substring(0,t)),-1!=(t=o.indexOf(" "))&&(o=o.substring(0,t)),-1!=(t=o.indexOf(")"))&&(o=o.substring(0,t)),o&&(a=parseInt(""+o,10),isNaN(a)&&(o=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10))),a?i+"_"+a:i}function o(){var e="其它",t=e,n=navigator.userAgent,r=navigator.appVersion,i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var o in i){var a=i[o];if(a.r.test(n)){t=a.s;break}}var s=e;switch(/Windows/.test(t)&&(s=/Windows (.*)/.exec(t)[1],t="Windows"),t){case"Mac OS X":s="";break;case"Android":var d=(/Android ([\.\_\d]+)/.exec(n)[1]||"").split(".").slice(0,2);s=d.join(".");break;case"iOS":s=/OS (\d+)_(\d+)_?(\d+)?/.exec(r),s=s[1]+"."+s[2]}return t===e?t:t+s}function a(){var e="";return screen.width&&(width=screen.width?screen.width:"",height=screen.height?screen.height:"",e+=""+width+"x"+height),e}function s(){var e=(window.devicePixelRatio?window.devicePixelRatio:1)-0;return e.toFixed(1)}function d(){return window.navigator.userAgent}function u(){var e=d();return e.indexOf("Crosswalk")>-1}n(2),window;e.exports={getPlatform:r,getScreen:a,getOs:o,getBrowser:i,getUa:d,getDevicePixelRatio:s,getAll:function(){return{platform:r(),screen:a(),os:o(),browser:i(),devicePixelRatio:s(),isXwalk:u()}}}},function(e,t){var n=0;e.exports={formatData:function(e){return(""+e).replace(/\./gim,"_")},formatUrl:function(e){return"string"==typeof e&&(e=e.split("?")[0].split("https://").join("").split("http://").join(""),"/"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1))),e},getIEVersion:function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var t=navigator.userAgent,n=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}return e},getUniqId:function(){return"_traceId_"+n++},post:function(e,t){t=t||{};var n,r=this.getUniqId();try{n=document.createElement('<iframe name="'+r+'">')}catch(i){n=document.createElement("iframe"),n.setAttribute("name",r)}try{n.style.display="none";var o=document.createElement("form");o.setAttribute("method","POST"),o.setAttribute("action",e),o.setAttribute("target",r);for(var a in t)if(t.hasOwnProperty(a)){var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name",a),s.setAttribute("value",t[a]),o.appendChild(s)}document.body.appendChild(o),document.body.appendChild(n),this.addEventListener(n,"load",function(){try{document.body.removeChild(o),document.body.removeChild(n)}catch(e){}}),o.submit()}catch(i){}},waitFor$:function(e){return window.$?void e():void setTimeout(function(){this.waitFor$(e)},50)},addEventListener:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},extend:function(){for(var e=arguments,t=arguments[0],n=1;n<e.length;n++){var r=e[n];for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t},trim:function(e){var t=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");return String(e).replace(t,"")},getMsExactMin:function(){var e=(new Date).getTime();return e-e%6e4},stringify:function(e){var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,r,i=[],o=e&&e.constructor==Array;for(n in e)r=e[n],t=typeof r,e.hasOwnProperty(n)&&("string"==t?r='"'+r+'"':"object"==t&&null!==r&&(r=jQuery.stringify(r)),i.push((o?"":'"'+n+'":')+String(r)));return(o?"[":"{")+String(i)+(o?"]":"}")}}},function(e,t,n){function r(){return window.performance&&window.performance.timing?s.responseEnd-s.requestStart:a.BLANK_VALUE}function i(){if(!s)return{};for(var e={dns:s.domainLookupEnd-s.domainLookupStart,tcp:s.connectEnd-s.connectStart,request:s.responseStart-s.requestStart,response:s.responseEnd-s.responseStart,domContentLoad:s.domContentLoadedEventEnd-s.domContentLoadedEventStart,blankTime:(window.__trace__headendt||0)-s.domainLookupStart,readyTime:s.domInteractive-s.domainLookupStart,onloadTime:s.domComplete-s.domainLookupStart,os:o.getOs(),browser:o.getBrowser()},t=["dns","tcp","request","response","domContentLoad","loadEvent","blankTime","readyTime","onloadTime"],n=0;n<t.length;n++)if(e[t[n]]<0)return{};return e}var o=n(1),a=n(4),s=window.performance&&window.performance.timing?window.performance.timing:null;e.exports={getOnload:i,getResponseTime:r}},function(e,t){e.exports={URL:"http://log.juangua.com/mlogs.php",APPID:30,BLANK_VALUE:"",LOCALSTORAGE_KEY:"__trace__queue",LOCALSTORAGE_MAXLENGTH:3,COOL_DOWN:5e3,eventidMap:{h5Performance:50003,pcPerformance:50004,jserror:50005},abbreviation:{}}},function(e,t,n){function r(e,t,n,r){for(var i=!0,o=0;o<d.length;o++){var a=d[o]||{};if(a.msg===e&&a.file===t&&a.line===n&&a["char"]===r){i=!1;break}}return i}var i=(document,n(4),n(6)),o=n(8),a=n(1),s=n(2),d=[];e.exports={init:function(){window.onerror=function(e,t,n,u){r(e,t,n,u)&&(d.push({msg:e,file:t,line:n,"char":u}),i.send(o.constructTraceData({type:"e",extra:s.extend({msg:e,file:t,line:n,"char":u},a.getAll())})))}}}},function(e,t,n){function r(e){var t,n={v:3};return t="n"===e[0].type||"s"===e[0].type?"network":"data",n[t]=i(e),n}function i(e){e=e||[];for(var t="	",n="\n",r=[],i=0;i<e.length;i++){var o=e[i]||{};if(o=o||{},o.extra){o.extra.performanceEvent&&delete o.extra.performanceEvent;var a=window.JSON?JSON.stringify:u.stringify;o.extra=a(o.extra)}var s=[];"n"===o.type||"s"===o.type?s=["appid","type","did","startTime","url","responseCode","responseTime","time","fixTime","requestSize","responseSize","bizCode","extra"]:"e"===o.type&&(s=["appid","type","did","startTime","uid","referrer","url","time","fixTime","extra"]);for(var d=[],c=0;c<s.length;c++)d.push(o[s[c]]);r.push(d.join(t))}return r.join(n)}function o(e){return"e"===e.type&&e.extra.performanceEvent}function a(e){var t=(new Date).getTime();t-p>c.COOL_DOWN&&(u.post(c.URL,e),p=t)}function s(){setTimeout(function(){d.isReadyPost()&&a(r(d.shift())),s()},c.COOL_DOWN)}var d=n(7),u=n(2),c=n(4),p=0;e.exports={send:function(e){if(e=e||{},e.extra=e.extra||{},"n"!==e.type&&!o(e))return void u.post(c.URL,r([e]));var t=d.push(e);t||u.post(c.URL,r([e])),"n"!==e.type&&d.isReadyPost()&&a(r(d.shift()))},sendImmediately:function(e){e=e||{},e.extra=e.extra||{},u.post(c.URL,r([e]))},init:function(){s()}}},function(e,t,n){function r(){return{event:[],network:[]}}var i={e:"event",n:"network",s:"network"},o=n(4),a=n(2);e.exports={support:!(!window.localStorage||!window.JSON||"function"!=typeof localStorage.getItem||"function"!=typeof localStorage.setItem||11==a.getIEVersion()),init:function(){this.support&&this.getStorage()},push:function(e){if(!this.support)return!1;var t=this.getStorage()||r(),n=i[e.type];return n?(t[n].push(e),this.setStorage(t),t):!1},shift:function(e){if(!this.support)return!1;e=e||o.LOCALSTORAGE_MAXLENGTH;var t,n=this.getStorage();if(n.event.length>=e)t="event";else{if(!(n.network.length>=e))return!1;t="network"}var r=n[t].slice(0,e);return n[t]=n[t].slice(e),this.setStorage(n),r},isReadyPost:function(){if(!this.support)return!1;var e=this.getStorage();return e.event.length>o.LOCALSTORAGE_MAXLENGTH||e.network.length>o.LOCALSTORAGE_MAXLENGTH},getStorage:function(){try{var e=JSON.parse(localStorage.getItem(o.LOCALSTORAGE_KEY))}catch(t){e=r(),this.setStorage(e)}return e||(e=r(),this.setStorage(e)),e},setStorage:function(e){try{localStorage.setItem(o.LOCALSTORAGE_KEY,JSON.stringify(e))}catch(t){return!1}}}},function(e,t,n){var r=n(4),i=n(9),o=n(2);e.exports={constructTraceData:function(e){e=e||{},e.extra=e.extra||{},e.extra.pageUrl=o.formatUrl(location.href);var t=Math.ceil(o.getMsExactMin()/1e3);return e=o.extend({appid:i.getAppid(),did:i.getDid(),startTime:t,uid:i.getUid(),referrer:document.referrer,url:o.formatUrl(location.href),time:t,fixTime:t},e)},constructNetworkData:function(e){e=e||{},e.extra=e.extra||{},e.extra.pageUrl=o.formatUrl(location.href);var t=Math.ceil(o.getMsExactMin()/1e3);return e=o.extend({appid:i.getAppid(),did:i.getDid(),startTime:t,time:t,fixTime:r.BLANK_VALUE,requestSize:t},e)}}},function(e,t,n){var r=n(4),i=n(2);e.exports={getUid:function(){var e=this._getCookie()||{};return e.__ud||r.BLANK_VALUE},getDid:function(){var e=this._getCookie()||{};return e.__mgjuuid||r.BLANK_VALUE},getAppid:function(){return r.APPID},_getCookie:function(){for(var e=document.cookie||"",t=e.split(";"),n={},r=0;r<t.length;r++){var o=i.trim(t[r]||""),a=o.split("=");n[a[0]]=a[1]}return n}}},function(e,t,n){var r=n(2),i=n(6),o=n(8),a=n(4);e.exports={init:function(){var e=$.ajax;$.ajax=function(){var t=(new Date).getTime(),n=e.apply(this,arguments);try{var s,d=!1;"string"==typeof arguments[0]?(s=r.formatUrl(arguments[0]),arguments[1]&&"[object Object]"===Object.prototype.toString.call(arguments[1])&&"jsonp"===arguments[1].dataType&&(d=!0)):"object"==typeof arguments[0]&&(s=r.formatUrl(arguments[0].url||""),"jsonp"===arguments[0].dataType&&(d=!0)),n.always(function(e){if(!d){var r=n.getAllResponseHeaders()||"",u=/content\-length\:\s(\d*)/m,c=0,p=u.exec(r);p&&p[1]&&(c=$.trim(p[1])||"");var f;"[object Object]"===Object.prototype.toString.call(e)&&e.status&&(f=e.status.code),i.send(o.constructNetworkData({type:"n",url:s,responseCode:n.status,responseSize:c,responseTime:(new Date).getTime()-t,bizCode:f||a.BLANK_VALUE,extra:{isAjax:1}}))}})}catch(u){}return n}}}}]);!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("pc/common/header/index",[],e):"object"==typeof exports?exports["pc/common/header/index"]=e():t["pc/common/header/index"]=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";n(1)},function(t,e,n){var o,i;o=[],i=function(){function t(t,e){this.init(t,e)}function e(){function t(t){return $.trim(t).replace(/(<|>|'|"|window|alert|eval|$|jQuery)/gi,"")}r.on("keyup keydown",function(n){var o=$(this),i=$("#select_type");if(!i.length||"bao"===i.val()||"5"===i.val())switch(n.keyCode){case 40:if("keyup"==n.type||!a.data("isshow"))break;f.chooseIndex=f.chooseIndex+1>f.tipLength-1?0:++f.chooseIndex;var l=m.changeListTab(f.chooseIndex);r.val(l);break;case 38:if("keyup"==n.type||!a.data("isshow"))break;f.chooseIndex=f.chooseIndex-1<0?f.tipLength-1:--f.chooseIndex;var l=m.changeListTab(f.chooseIndex);r.val(l);break;case 13:if("keyup"==n.type)break;n.preventDefault(),e.submitBefore(f.chooseType,f.chooseIndex),c.submit();break;case 37:break;case 39:break;default:clearTimeout(s),s=setTimeout(function(){var e=t(o.val());m.resetFactory(e)},500)}}).on("focus",function(){var e=$(this),n=$("#select_type");if(s&&clearTimeout(s),!n.length||"bao"===n.val()||"5"===n.val()){var o=t(e.val());clearTimeout(s),s=setTimeout(function(){m.resetFactory(o)},300)}}).on("blur",function(){$("body").bind("click",function(t){$(t.target).parents(".seatch_type_msearch").length||(a.empty().data("isshow",!0).hide(),$("body").unbind("click"))})}),a.on("mouseenter",".search_tip li",function(t){var e=$(this),n=e.index();f.chooseIndex=n,m.changeListTab(n)}).on("click",".search_tip li",function(t){var n=$(this).find(".title").text();$(t.target).hasClass("prop")&&(n+=" "+$(t.target).text()),e.submitBefore(f.chooseType,f.chooseIndex),r.val(n),c.submit()}),a.on("click",".hot_list li",function(){var t=$(this);return e.submitBefore(m.hotTypeName,t.index()),r.val(t.find("span").html()),c.submit(),!1}),a.on("click",".local_del",function(t){var e=$(this),n=e.parent();d.del(n.find(".title").attr("title"));var o=d.getTenItem();return m.updateLocalContent(e,o),f.chooseIndex=-1,f.tipLength=o.length,!1}).on("click",".local_title .del_all",function(){var t=$(this);return d.set(),m.destoryLocalContent(t),t.remove(),f.chooseIndex=-1,f.tipLength=0,!1}),i.on("click",".selectbox a",function(t){t.preventDefault(),m.changeType($(this))}).on("mouseenter",".selectbox",function(){a.hide(),$(this).addClass("sele_hover")}).on("mouseleave",".selectbox",function(){$(this).removeClass("sele_hover")}),c.submit(function(){var n=$(this),o=t(r.val()),i=r.attr("def-v");if(""==o||o==i){if(""==o&&"shop"==$("#select_type").val())return!1;var s=r.data("def");r.val(s||"");var a='<input type="hidden" name="from" value="searchplacehold" id="TJ">';$("#top_nav_form").append(a),setTimeout(function(){$("#TJ").remove()},1e3)}else o==$.trim(r.val())&&"bao"==$("#select_type").val()&&d.addOne(o);if(c.find(".emptyvalue").remove(),n.data("index")>-1&&null!==n.data("type")){var l='<input type="hidden" class="emptyvalue" name="from" value="'+n.data("type")+"querytip"+n.data("index")+'">';c.append(l)}m.destoryContent(),e.submitAfter()}),m.showStickySearch()&&m.initStickySearch()}var n=MoGu.ui.getdoT(),o=MoGu.util.getStore();if(n&&o){$(".store_header").length;var i=$("#nav_search_form");if(i.length){var s,a=$(".top_search_hint"),r=i.find(".ts_txt"),c=$("#top_nav_form"),l=$("#select_type"),h=i.find(".selectbox"),p="/msearch/tips/item",u={nowHost:window.location.host,defultHost:"http://www.mogujie.com",template:'<div class="search_tip_box fl">{{=it.searchResult}}</div>',listItemTemp:['<div class="mr300 tip_wrap">','{{ if(it.titleName && it.titleName != ""){ }}','<h3 class="search_tip_title">{{=it.titleName}}</h3>',"{{ }else{ }}","{{ } }}",'<ul class="search_tip">',"{{~it.items :item:index}}","{{ if(index < 10){ }}","<li>",'<a href="javascript:;" class="title" title="{{= item.title }}" >{{= item.title }}</a>',"{{~item.props :prop: i}}",'<span class="prop">{{= prop }}</span>',"{{~}}","</li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),localItemTemp:['<div class="mr300 tip_wrap">','<h3 class="search_tip_title local_title clearfix">',"{{ if(it.items.length){ }}",'<span class="del_all">删除</span>',"{{ } }}","历史记录","</h3>",'<ul class="search_tip">',"{{~it.items :item:index}}","{{ if(index < 10){ }}",'<li class="local_item">','<a href="javascript:;" class="title" title="{{=item}}" >{{=item}}</a>',"{{~item.props :prop: i}}",'<span class="prop">{{= prop }}</span>',"{{~}}",'<span class="nums local_del">x</span>',"</li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),hotKeyTpl:['<div class="search_hot_wrap">','<h3 class="search_tip_title hot_title">热门关键词</h3>','<ul class="hot_list clearfix">',"{{~it.items :item:index}}","{{ if(index < 10){ }}","<li><span>{{= item.title }}</span></li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),emptyTpl:['<div class="mr300 tip_wrap">','<p class="tip_none">暂无相关热门关键词</p>',"</div>"].join("")},d={keyName:"_search_local_history",keyShowName:"_search_local_history_show",maxLength:20,showLength:10,isshow:function(){return!0},abtest:function(t){o.set(this.keyShowName,1)},get:function(){return o.get(this.keyName)||[]},getTenItem:function(){var t=this.get();return t.slice(0,this.showLength)},set:function(t){o.set(this.keyName,t||[])},addOne:function(t){if(t=$.trim(t),""!=t){var e=this.get(),n=$.inArray(t,e);-1==n?(e.unshift(t),e.length>this.maxLength&&e.pop()):(e.splice(n,1),e.unshift(t)),this.set(e)}},del:function(t){t=$.trim(t);var e=this.get(),n=$.inArray(t,e);n>-1&&(e.splice(n,1),this.set(e))}};t.prototype.init=function(t,e){this.chooseIndex=-1,this.chooseType=t,this.tipLength=e||0};var f=new t("undefined"),m={ajaxRequest:null,hotKeyArr:[],isShopHost:function(){return!1},showStickySearch:function(){var t=location.pathname,e=$(".mgj_primary"),n=e.length>0?e.offset().top+e.height():10;return"www.mogujie.com"===location.host&&("/"===t||"/more"===t)||t.indexOf("/book/search/")>-1||/webdemo || localhost/.test(location.host)&&/sticky/.test(location.search)?(t.indexOf("/book/search/")>-1&&(e=$(".search_filter_wrap"),n=e.length?e.offset().top:150),this.stickyTargetTop=n,!0):!1},resetFactory:function(t){this.isShopHost()?this.resetShopContent(t):d.isshow()?this.resetListContent(t):this.resetOldContent(t)},resetListContent:function(e){function o(t){i(function(){s()})}function i(n){r.ajaxRequest&&r.ajaxRequest.abort();var o=d.getTenItem();return""==$.trim(e)?(c.push(r.renderLocalContent(o)),void($.isFunction(n)&&n())):void(r.ajaxRequest=$.post(p,{input:e},function(e){if(e&&1001==e.status.code){var o=e.result.tipCount;0==o?c.push(r.renderEmptyContent()):(c.push(r.renderSearchContent(e.result.tips,e.result.nums,e.result.props)),f=new t(r.searchTypeName,o))}$.isFunction(n)&&n()},"json"))}function s(){var t=n.template(u.template)({searchResult:c.join("")});a.html(t),r.showContentBox()}var r=this,c=[];r.hotKeyArr.length?o(r.hotKeyArr):$.post(p,{},function(t){r.hotKeyArr=t.result.tips,o(r.hotKeyArr)},"json")},resetShopContent:function(e){function o(n){s.ajaxRequest&&s.ajaxRequest.abort(),s.ajaxRequest=$.post(p,{input:e},function(e){if(e&&1001==e.status.code){var o=e.result.tipCount;0==o?r.push(s.renderEmptyContent()):(r.push(s.renderSearchContent(e.result.tips,e.result.nums,e.result.props,c)),f=new t(l,o))}$.isFunction(n)&&n()},"json")}function i(){var t=n.template(u.template)({searchResult:r.join("")});a.html(t),s.showContentBox()}var s=this,r=[],c="",l=""!=e?s.searchTypeName:s.hotTypeName;o(function(){i()})},resetOldContent:function(e){function o(n){s.ajaxRequest&&s.ajaxRequest.abort(),s.ajaxRequest=$.post(p,{input:e},function(e){if(e&&1001==e.status.code){var o=e.result.tipCount;0==o?r.push(s.renderEmptyContent()):(r.push(s.renderSearchContent(e.result.tips,e.result.nums,c)),f=new t(l,o))}$.isFunction(n)&&n()},"json")}function i(){var t=n.template(u.template)({searchResult:r.join("")});a.html(t),a.find(".tip_wrap").removeClass("mr300").addClass("mr300_fix"),s.showContentBox()}var s=this,r=[],c=""!=e?"搜索结果":"热门关键词",l=""!=e?s.searchTypeName:s.hotTypeName;o(function(){i()})},searchTypeName:"",renderSearchContent:function(t,e,o,i){for(var s=[],a=0;a<t.length;a++)s.push({title:t[a],props:o[a],num:e[a]});return n.template(u.listItemTemp)({titleName:i||null,items:s})},localTypeName:"local",renderLocalContent:function(t){return n.template(u.localItemTemp)({items:t})},updateLocalContent:function(t,e){var n=t.parent(),o=t.parents(".search_tip");if(n.length&&o.length)if(e.length<d.showLength)n.remove();else{var i=e[d.showLength-1];n.find(".title").attr("title",i).html(i),n.appendTo(o)}},destoryLocalContent:function(t){var e=t.parents(".tip_wrap").find(".search_tip");e.length&&e.empty()},hotTypeName:"default",renderHotContent:function(t){for(var e=[],o=0;o<t.length;o++)e.push({title:t[o]});return n.template(u.hotKeyTpl)({items:e})},renderEmptyContent:function(){return u.emptyTpl},destoryContent:function(){a.empty().hide()},getContentPosition:function(t,e){var n=e.offset(),o=t.data("fixleft"),i=t.data("fixtop");o&&(n.left+=parseInt(o)),i&&(n.top-=parseInt(i));var s=e.width()-34;t.css({left:n.left,top:n.top+e.height()+2,width:s}).addClass("hasposition")},showContentBox:function(){a.show().data("isshow",!0)},changeListTab:function(t){var e=a.find(".search_tip li"),n=e.eq(t);return e.removeClass("checked"),n.addClass("checked"),n.find(".title").text()},changeType:function(t){var e=t.parent(),n=e.attr("data-index"),o=t.text();if(l.val(n),h.find(".selected").text("搜"+o),e.siblings("li").removeClass("current"),e.addClass("current"),"shop"==n)r.val()==r.attr("def-v")&&r.val("");else if(""==r.val()){var i=r.attr("def-v");r.val(i)}4==n?"shop.mogujie.com"===u.nowHost?c.attr("action",u.defultHost+"/group/search/"):c.attr("action","/group/search/"):"shop.mogujie.com"===u.nowHost?c.attr("action",u.defultHost+"/search"):c.attr("action","/search/"),h.removeClass("sele_hover")},initStickySearch:function(){var t=$("#nav_search_form"),e=['<div id="J_sticky_container" class="sticky-search-container">','<div class="wrap">','<a rel="nofollow" href="http://www.mogujie.com" class="logo" title="蘑菇街|我的买手街">蘑菇街|我的买手街</a>','<div class="sticky-search-content"></div>',"</div>","</div>"].join("");$("body").append(e);var n=$(".sticky-search-container");$(window).off("scroll.sticky").on("scroll.sticky",function(){$(document).scrollTop()>m.stickyTargetTop?n.hasClass("lets-rock")||n.find(".sticky-search-content").append(t).end().addClass("lets-rock"):n.hasClass("lets-rock")&&($(".normal-search-content").append($("#nav_search_form")),n.find(".sticky-search-content").empty().end().removeClass("lets-rock"))})}};e.submitBefore=function(t,e){c.data({type:t,index:e})},e.submitAfter=function(){c.removeData("type index"),f.chooseType="undefined",f.chooseIndex=-1};var v=function(){MoGu.util.inputTextHide(r,"ts_high"),"www.mogujie.com"===u.nowHost||h.parents(".store_header").length||c.attr("action",u.defultHost+c.attr("action")),e()};v()}}}.apply(e,o),!(void 0!==i&&(t.exports=i))}])}),"function"==typeof define&&define.amd&&require(["pc/common/header/index"]);